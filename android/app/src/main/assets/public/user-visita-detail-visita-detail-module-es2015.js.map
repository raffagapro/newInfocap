{"version":3,"sources":["./src/app/user/visita-detail/visita-detail.page.html","./src/app/user/visita-detail/visita-detail.module.ts","./src/app/user/visita-detail/visita-detail.page.scss","./src/app/user/visita-detail/visita-detail-routing.module.ts","./src/app/user/visita-detail/visita-detail.page.ts"],"names":[],"mappings":"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","file":"user-visita-detail-visita-detail-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar mode=\\\"ios\\\" color=\\\"primary\\\">\\n\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/user/solicitudes\\\" text=\\\"\\\" icon=\\\"arrow-back\\\"></ion-back-button>\\n    </ion-buttons>\\n\\n    <ion-title class=\\\"title-toolbar text-center\\\">VISITA TÉCNICA</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <!-- profesional card item -->\\n  <div class=\\\"no-border ion-margin-top\\\">\\n    <ion-grid>\\n      <ion-row class=\\\"ion-align-items-center\\\">\\n        <!-- profile img -->\\n        <ion-col size=\\\"4\\\" offset=\\\"1\\\" sizeMd=\\\"2\\\" offsetMd=\\\"2\\\">\\n          <ion-avatar class=\\\"profileImg\\\">\\n            <img src=\\\"{{ !selectedProfPhoto ? 'assets/images/avatar.png' : selectedProfPhoto }}\\\" />\\n          </ion-avatar>\\n        </ion-col>\\n\\n        <!-- title -->\\n        <ion-col size=\\\"6\\\">\\n          <ion-text>\\n            <span class=\\\"titleSelect main-color\\\">{{loadedService.categoryName}} de {{loadedService.supplierName}}\\n              {{loadedService.supplierLastName}}</span><br>\\n            <p class=\\\"main-color mini-text\\\" style=\\\"margin-top: 0; margin-bottom: 0;\\\">\\n              {{formatDate(loadedService.created_date, 'DD/MM/YYYY HH:mm:ss', true)}}</p>\\n          </ion-text>\\n        </ion-col>\\n\\n      </ion-row>\\n    </ion-grid>\\n  </div>\\n\\n  <ion-grid>\\n\\n    <!-- title -->\\n    <ion-row>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-text class=\\\"main-color title\\\"><b>Trabajo a realizar</b></ion-text>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-text class=\\\"titleText\\\">\\n          {{loadedService.description}}\\n        </ion-text>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n    <!-- Slider -->\\n    <ion-row class=\\\"\\\" *ngIf=\\\"loadedService.img_request.length > 0\\\">\\n      <ion-col size=\\\"12\\\">\\n        <ion-slides [options]=\\\"slideOptions\\\">\\n          <!-- slide -->\\n          <ion-slide *ngFor=\\\"let image of loadedService.img_request\\\">\\n            <img (click)=\\\"openImage(image.image)\\\" src=\\\"{{ image.image }}\\\" class=\\\"imgSlide\\\">\\n          </ion-slide>\\n\\n        </ion-slides>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- Fecha de visita -->\\n    <ion-row>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-text class=\\\"main-color subtitle\\\"><b>Fecha de visita</b></ion-text>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-icon src=\\\"/assets/icon/ic_date_range.svg\\\" class=\\\"main-color iconFix\\\"></ion-icon>\\n        <ion-text\\n          *ngIf=\\\"loadedService && loadedService.request_technical && loadedService.request_technical.length === 0\\\"\\n          class=\\\"subText\\\"> {{getRequiredDate()}}</ion-text>\\n        <ion-text *ngIf=\\\"loadedService && loadedService.request_technical && loadedService.request_technical.length > 0\\\"\\n          class=\\\"subText\\\"> {{formatDate(loadedService.request_technical[0].visit_date, 'YYYY-MM-DD')}}</ion-text>\\n\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n    <!-- Rango de horas -->\\n    <ion-row class=\\\"ion-margin-top\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-text class=\\\"main-color subtitle\\\"><b>Rango de horas</b></ion-text>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-icon src=\\\"/assets/icon/ic_schedule.svg\\\" class=\\\"main-color iconFix\\\"></ion-icon>\\n        <ion-text\\n          *ngIf=\\\"loadedService && loadedService.request_technical && loadedService.request_technical.length === 0\\\"\\n          class=\\\"subText\\\"> {{formatTime()}}</ion-text>\\n        <ion-text *ngIf=\\\"loadedService && loadedService.request_technical && loadedService.request_technical.length > 0\\\"\\n          class=\\\"subText\\\"> {{formatVisitTime()}}</ion-text>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n    <!-- eceptar visita BTN -->\\n    <ion-row class=\\\"ion-margin-top\\\" *ngIf=\\\"showButtons\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col>\\n        <ion-button size=\\\"5\\\" expand=\\\"block\\\" class=\\\"ion-text-uppercase\\\" (click)=\\\"confirmVisit(1)\\\">\\n          ACEPTAR VISITA\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n    <!-- imitir por el momento BTN -->\\n    <ion-row class=\\\"ion-margin-bottom\\\" *ngIf=\\\"showButtons\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col>\\n        <ion-button size=\\\"5\\\" expand=\\\"block\\\" fill=\\\"outline\\\" class=\\\"ion-text-uppercase\\\" (click)=\\\"confirmVisit(0)\\\">\\n          OMITIR POR EL MOMENTO\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n  </ion-grid>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { VisitaDetailPageRoutingModule } from './visita-detail-routing.module';\n\nimport { VisitaDetailPage } from './visita-detail.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    VisitaDetailPageRoutingModule\n  ],\n  declarations: [VisitaDetailPage]\n})\nexport class VisitaDetailPageModule {}\n","export default \".no-border {\\n  padding-top: 2px;\\n  padding-bottom: 2px;\\n}\\n\\n.profileImg {\\n  margin-left: 10px;\\n  height: 75px;\\n  width: 75px;\\n}\\n\\n.titleSelect {\\n  font-size: 23px;\\n  font-weight: bold;\\n}\\n\\n.title {\\n  font-size: 20px;\\n}\\n\\n.titleText {\\n  font-size: 16px;\\n}\\n\\n.imgSlide {\\n  height: 125px;\\n}\\n\\n.subtitle {\\n  font-size: 18px;\\n}\\n\\n.subText {\\n  font-size: 14px;\\n}\\n\\n.minusMargin {\\n  margin-top: -25px;\\n}\\n\\n.iconFix {\\n  margin-bottom: -3px;\\n}\\n\\n.mini-text {\\n  font-size: 14px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Zpc2l0YS1kZXRhaWwucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZ0JBQUE7RUFDQSxtQkFBQTtBQUNKOztBQUNBO0VBQ0ksaUJBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtBQUVKOztBQUFBO0VBQ0ksZUFBQTtFQUNBLGlCQUFBO0FBR0o7O0FBREE7RUFDSSxlQUFBO0FBSUo7O0FBRkE7RUFDSSxlQUFBO0FBS0o7O0FBSEE7RUFDSSxhQUFBO0FBTUo7O0FBSkE7RUFDSSxlQUFBO0FBT0o7O0FBTEE7RUFDSSxlQUFBO0FBUUo7O0FBTkE7RUFDSSxpQkFBQTtBQVNKOztBQVBBO0VBQ0ksbUJBQUE7QUFVSjs7QUFSQTtFQUVJLGVBQUE7QUFVSiIsImZpbGUiOiJ2aXNpdGEtZGV0YWlsLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5uby1ib3JkZXJ7XG4gICAgcGFkZGluZy10b3A6IDJweDtcbiAgICBwYWRkaW5nLWJvdHRvbTogMnB4O1xufVxuLnByb2ZpbGVJbWd7XG4gICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgaGVpZ2h0OiA3NXB4O1xuICAgIHdpZHRoOiA3NXB4O1xufVxuLnRpdGxlU2VsZWN0e1xuICAgIGZvbnQtc2l6ZTogMjNweDtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbn1cbi50aXRsZXtcbiAgICBmb250LXNpemU6IDIwcHg7XG4gIH1cbi50aXRsZVRleHR7XG4gICAgZm9udC1zaXplOiAxNnB4O1xufVxuLmltZ1NsaWRle1xuICAgIGhlaWdodDoxMjVweDtcbn1cbi5zdWJ0aXRsZXtcbiAgICBmb250LXNpemU6IDE4cHg7XG59XG4uc3ViVGV4dHtcbiAgICBmb250LXNpemU6IDE0cHg7XG59XG4ubWludXNNYXJnaW57XG4gICAgbWFyZ2luLXRvcDogLTI1cHg7XG59XG4uaWNvbkZpeHtcbiAgICBtYXJnaW4tYm90dG9tOiAtM3B4O1xufVxuLm1pbmktdGV4dFxue1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbn0iXX0= */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { VisitaDetailPage } from './visita-detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: VisitaDetailPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class VisitaDetailPageRoutingModule {}\n","import { Component, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport {\n\tLoadingController,\n\tMenuController,\n\tModalController,\n} from \"@ionic/angular\";\nimport axios from \"axios\";\nimport { SolicitudService } from \"src/app/services/solicitud.service\";\nimport { API } from \"src/environments/environment\";\nimport { Subscription } from \"rxjs\";\nimport { User } from \"src/app/model/user.model\";\nimport { UserService } from \"src/app/services/user.service\";\nimport { Moment } from \"moment\";\nimport * as moment from \"moment\";\nimport { SuccessModalComponent } from \"src/app/shared/success-modal/success-modal.component\";\nimport { ImageModalComponent } from \"src/app/shared/image-modal/image-modal.component\";\nimport { IMAGE_URL_BLANK } from \"src/shared/constants\";\n\n@Component({\n\tselector: \"app-visita-detail\",\n\ttemplateUrl: \"./visita-detail.page.html\",\n\tstyleUrls: [\"./visita-detail.page.scss\"],\n})\nexport class VisitaDetailPage implements OnInit {\n\tuserSubscription: Subscription;\n\tuser: User;\n\tloadedService = {\n\t\tcategoryName: null,\n\t\tcummunename: null,\n\t\tcategory_id: null,\n\t\tcreated_date: null,\n\t\tdate_required: null,\n\t\tdescProf: null,\n\t\tdescription: null,\n\t\thours_professional: null,\n\t\thours_requestservice: null,\n    hours_final: null,\n\t\timg_profile: null,\n\t\tprofessional_profiles_id: null,\n\t\trequest_id: null,\n\t\tstatus_id: null,\n\t\tstatus_name: null,\n\t\tstatus_order: null,\n\t\tsupplierLastName: null,\n\t\tsupplierName: null,\n\t\tsupplier_id: null,\n\t\tticket_number: null,\n\t\tuser_client_id: null,\n\t\twork_days: null,\n\t\tsuplierPhone1: null,\n\t\timg_request: [],\n\t\trequest_technical: [],\n\t\thistory_status: [],\n\t};\n\tslideOptions = {\n\t\tinitialSlide: 0,\n\t\tslidesPerView: 2,\n\t\tautoplay: true,\n\t};\n\n\tshowButtons: boolean = true;\n\terror: boolean = false;\n\terrorMessage: string = \"\";\n\tselectedProfPhoto: string;\n\n\tconstructor(\n\t\tprivate modalController: ModalController,\n\t\tprivate router: Router,\n\t\tprivate loadingController: LoadingController,\n\t\tprivate userService: UserService,\n\t\tprivate menuController: MenuController,\n\t\tprivate solServ: SolicitudService\n\t) {}\n\n\tngOnInit() {\n\t\tthis.userSubscription = this.userService.loggedUser.subscribe((user) => {\n\t\t\tthis.user = user;\n\t\t\tthis.loadService();\n\t\t});\n\t}\n\n\tionViewWillEnter() {\n\t\tthis.menuController.enable(true, \"user\");\n\t}\n\n\tasync loadService() {\n\t\tlet loader = await this.loadingController.create({ message: \"\" });\n\n\t\ttry {\n\t\t\tawait loader.present();\n\t\t\tlet response = await axios.get(\n\t\t\t\t`${API}/client/requestservice/${this.solServ.solicitud.solicitudID}`,\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Bearer ${this.user.access_token}`,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tthis.solServ.setServiceObj(response.data.data);\n\t\t\tthis.loadedService = response.data.data;\n\t\t\tif (this.loadedService.img_request.length < 2) {\n\t\t\t\tthis.slideOptions.slidesPerView = 1;\n\t\t\t}\n\t\t\tthis.showButtons = false//this.loadedService.status_id === 2;\n\n\t\t\tthis.selectedProfPhoto = this.solServ.solicitud.proPhoto;\n\n\t\t\tif (this.selectedProfPhoto === IMAGE_URL_BLANK) {\n\t\t\t\tthis.selectedProfPhoto = null;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t} finally {\n\t\t\tloader.dismiss();\n\t\t}\n\t}\n\n\topenMenu() {\n\t\tthis.menuController.open();\n\t}\n\n\tformatDate(\n\t\tdate: Moment,\n\t\tdateFormat: any = \"YYYY-MM-DD\",\n\t\tuseTimezone: boolean = false\n\t) {\n\t\tlet momentDate = moment.utc(date, dateFormat);\n\t\tif (useTimezone) {\n\t\t\tmomentDate.tz(moment.tz.guess());\n\t\t}\n\t\treturn momentDate.format(\"dddd D [de] MMMM [de] YYYY\");\n\t}\n\n\tformatTime() {\n\t\tif (!this.loadedService.hours_requestservice) {\n\t\t\treturn \"ND\";\n\t\t}\n\t\tlet startHour = moment.utc(this.loadedService.hours_requestservice, 'HH:mm:ss');\n\t\tlet endHour = moment.utc(this.loadedService.hours_final, 'HH:mm:ss');\n\t\treturn `${startHour.format(\"h:mm a\")} - ${endHour.format(\"h:mm a\")}`;\n\t}\n\n\tformatVisitTime() {\n\t\tif (\n\t\t\t!this.loadedService.request_technical ||\n\t\t\tthis.loadedService.request_technical.length == 0\n\t\t) {\n\t\t\treturn \"ND\";\n\t\t}\n\t\tlet hours = this.loadedService.request_technical[0].visit_hours\n\t\t\t.replace(\" \", \"\")\n\t\t\t.split(\"-\");\n\t\tlet startHour = moment.utc(hours[0], \"HH:mm\");\n\t\tlet endHour = moment.utc(hours[1], \"HH:mm\");\n\t\treturn `${startHour.format(\"h:mm a\")} - ${endHour.format(\"h:mm a\")}`;\n\t}\n\n\tasync confirmVisit(client_accepted: number) {\n\t\tlet loader = await this.loadingController.create({\n\t\t\tmessage: \"Enviando información...\",\n\t\t});\n\t\tloader.present();\n\t\ttry {\n\t\t\tlet response = await axios.post(\n\t\t\t\t`${API}/client/requesttechnical/${this.solServ.solicitud.solicitudID}`,\n\t\t\t\t{\n\t\t\t\t\tclient_accepted,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Bearer ${this.user.access_token}`,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tif (response.data && response.data.status !== 200) {\n\t\t\t\tthis.error = false;\n\t\t\t\tthis.errorMessage = \"Ocurrió un error al enviar la solicitud.\";\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.error = true;\n\t\t}\n\t\tloader.dismiss();\n\n\t\tif (!this.error) {\n\t\t\tthis.showButtons = false;\n\t\t\tlet message =\n\t\t\t\tclient_accepted === 1\n\t\t\t\t\t? \"HAZ ACEPTADO LA VISITA TÉCNICA\"\n\t\t\t\t\t: \"HAZ OMITIDO LA VISITA TÉCNICA\";\n\t\t\tconst successModal = await this.modalController.create({\n\t\t\t\tcomponent: SuccessModalComponent,\n\t\t\t\tcomponentProps: {\n\t\t\t\t\tmessage,\n\t\t\t\t\tredirect: false,\n\t\t\t\t},\n\t\t\t\tcssClass: \"modalSuccess\",\n\t\t\t});\n\t\t\tsuccessModal.present();\n\t\t}\n\t}\n\n\tasync openImage(image: string) {\n\t\tconst successModal = await this.modalController.create({\n\t\t\tcomponent: ImageModalComponent,\n\t\t\tcomponentProps: {\n\t\t\t\timage,\n\t\t\t},\n\t\t\tcssClass: \"modalImage\",\n\t\t});\n\t\tsuccessModal.present();\n\t}\n\n\tgetRequiredDate() {\n\t\tif (\n\t\t\tthis.loadedService.history_status &&\n\t\t\tthis.loadedService.history_status.length\n\t\t) {\n\t\t\tlet requestSendStatus = this.loadedService.history_status.find(\n\t\t\t\t(status) => status.name === \"VisitaTecnica\"\n\t\t\t);\n\t\t\tif (requestSendStatus)\n\t\t\t\treturn this.formatDate(requestSendStatus.date_required, \"DD/MM/YYYY\");\n\t\t\treturn this.formatDate(this.loadedService.date_required, \"DD-MM-YYYY\");\n\t\t}\n\t\treturn this.formatDate(this.loadedService.date_required, \"DD-MM-YYYY\");\n\t}\n}\n"],"sourceRoot":"webpack:///"}