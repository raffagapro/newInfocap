{"version":3,"sources":["./src/app/user/servicio-pagar/servicio-pagar-routing.module.ts","./src/app/user/servicio-pagar/servicio-pagar.module.ts","./src/app/user/servicio-pagar/servicio-pagar.page.ts","./src/app/user/servicio-pagar/servicio-pagar.page.scss","./src/app/user/servicio-pagar/servicio-pagar.page.html"],"names":[],"mappings":"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","file":"user-servicio-pagar-servicio-pagar-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ServicioPagarPage } from './servicio-pagar.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ServicioPagarPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ServicioPagarPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ServicioPagarPageRoutingModule } from './servicio-pagar-routing.module';\n\nimport { ServicioPagarPage } from './servicio-pagar.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ServicioPagarPageRoutingModule\n  ],\n  declarations: [ServicioPagarPage]\n})\nexport class ServicioPagarPageModule {}\n","import { HttpClient, HttpHeaders } from \"@angular/common/http\";\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport {\n\tLoadingController,\n\tMenuController,\n\tModalController,\n} from \"@ionic/angular\";\nimport axios from \"axios\";\nimport { Subscription } from \"rxjs\";\nimport { User } from \"src/app/model/user.model\";\nimport { SolicitudService } from \"src/app/services/solicitud.service\";\nimport { UserService } from \"src/app/services/user.service\";\nimport { API } from \"src/environments/environment\";\nimport { PaymentMethodType } from \"../solicitud-detail/solicitud-detail.page\";\nimport { SuccessModalComponent } from \"src/app/shared/success-modal/success-modal.component\";\nimport khenshin from \"cordova-khenshin/www/khenshin\";\n\n@Component({\n\tselector: \"app-servicio-pagar\",\n\ttemplateUrl: \"./servicio-pagar.page.html\",\n\tstyleUrls: [\"./servicio-pagar.page.scss\"],\n})\nexport class ServicioPagarPage implements OnInit, OnDestroy {\n\tgrabbedUser: User;\n\tuserSub: Subscription;\n\theaders: HttpHeaders;\n\tloadedService = {\n\t\tamount_client: null,\n\t\tcategoryName: null,\n\t\tcummunename: null,\n\t\tcategory_id: null,\n\t\tcreated_date: null,\n\t\tdate_required: null,\n\t\tdescProf: null,\n\t\tdescription: null,\n\t\thours_professional: null,\n\t\thours_requestservice: null,\n\t\timg_profile: null,\n\t\tprofessional_profiles_id: null,\n\t\trequest_id: null,\n\t\tstatus_id: null,\n\t\tstatus_name: null,\n\t\tstatus_order: null,\n\t\tsupplierLastName: null,\n\t\tsupplierName: null,\n\t\tsupplier_id: null,\n\t\tticket_number: null,\n\t\tuser_client_id: null,\n\t\twork_days: null,\n\t\trequest_cost: [],\n\t};\n\tserviceId: string;\n\twDate;\n\tservicesCosts;\n\tselectedButton: PaymentMethodType = \"credit\";\n\tpaymentTypes = [];\n\tisFinished = false;\n\tshowRateProfessional = false;\n\n\tconstructor(\n\t\tprivate modalController: ModalController,\n\t\tprivate router: Router,\n\t\tprivate menuController: MenuController,\n\t\tprivate http: HttpClient,\n\t\tprivate us: UserService,\n\t\tprivate lc: LoadingController,\n\t\tprivate solServ: SolicitudService,\n\t\tprivate route: ActivatedRoute\n\t) {}\n\n\tngOnInit() {\n\t\tthis.userSub = this.us.loggedUser.subscribe((user) => {\n\t\t\tthis.grabbedUser = user;\n\t\t\tthis.headers = new HttpHeaders().set(\n\t\t\t\t\"Authorization\",\n\t\t\t\t\"Bearer \" + this.grabbedUser.access_token\n\t\t\t);\n\t\t\tthis.serviceId = this.solServ.solicitud.solicitudID;\n\t\t\tthis.loadPaymentTypes();\n\t\t});\n\n\t\tthis.route.queryParamMap.subscribe((params: any) => {\n\t\t\tlet queryParams = { ...params };\n\t\t\tthis.isFinished = queryParams.params?.finished === \"true\";\n\t\t});\n\t}\n\n\tionViewWillEnter() {\n\t\tthis.menuController.enable(true, \"user\");\n\t}\n\n\tasync loadPaymentTypes() {\n\t\ttry {\n\t\t\tlet response = await axios.get(`${API}/payments/type`, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${this.grabbedUser.access_token}`,\n\t\t\t\t},\n\t\t\t});\n\t\t\tthis.paymentTypes = response.data.data;\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t} finally {\n\t\t\tthis.loadService();\n\t\t}\n\t}\n\n\tloadService() {\n\t\tthis.lc\n\t\t\t.create({\n\t\t\t\tmessage: \"Cargando informacion del servicio...\",\n\t\t\t})\n\t\t\t.then((loadingEl) => {\n\t\t\t\tloadingEl.present();\n\t\t\t\tthis.http\n\t\t\t\t\t.get(API + `/client/requestservice/${this.serviceId}`, {\n\t\t\t\t\t\theaders: this.headers,\n\t\t\t\t\t})\n\t\t\t\t\t.subscribe(\n\t\t\t\t\t\t(resData) => {\n\t\t\t\t\t\t\tloadingEl.dismiss();\n\t\t\t\t\t\t\tthis.loadedService = resData[\"data\"];\n\t\t\t\t\t\t\tthis.solServ.setServiceObj(resData[\"data\"]);\n\t\t\t\t\t\t\tlet worDate = this.loadedService.created_date.split(\" \");\n\t\t\t\t\t\t\tthis.wDate = worDate[0];\n\n\t\t\t\t\t\t\tif (this.loadedService.request_cost.length > 0) {\n\t\t\t\t\t\t\t\tlet firstCost = this.loadedService.request_cost[0];\n\t\t\t\t\t\t\t\tlet paymentType = this.paymentTypes.find(\n\t\t\t\t\t\t\t\t\t(paymentType) => paymentType.id === firstCost.payment_type_id\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (paymentType.name === \"Efectivo\") {\n\t\t\t\t\t\t\t\t\tthis.selectedButton = \"cash\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.selectedButton = \"credit\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.loadCosts();\n\t\t\t\t\t\t\tthis.validateIfRatingYet();\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(err) => {\n\t\t\t\t\t\t\tloadingEl.dismiss();\n\t\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t});\n\t}\n\n\tasync loadCosts() {\n\t\tlet loader = await this.lc.create({\n\t\t\tmessage: \"Consultando información...\",\n\t\t});\n\t\tloader.present();\n\t\ttry {\n\t\t\tlet response = await axios.get(\n\t\t\t\t`${API}/client/detailcostrequest/${this.serviceId}`,\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Bearer ${this.grabbedUser.access_token}`,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tif (response.data) {\n\t\t\t\tlet data = response.data.data;\n\t\t\t\tif (response.data.code !== 200) {\n\t\t\t\t\talert(\"Error\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.servicesCosts = data;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t} finally {\n\t\t\tloader.dismiss();\n\t\t}\n\t}\n\n\tgetServiceCost() {\n\t\tif (this.servicesCosts && this.servicesCosts.amount_client) {\n\t\t\treturn Math.floor(Number(this.servicesCosts.amount_client))\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetServiceAditional() {\n\t\tif (this.servicesCosts && this.servicesCosts.addittional.length > 0) {\n\t\t\treturn Math.floor(\n\t\t\t\tNumber(\n\t\t\t\t\tthis.servicesCosts.addittional.reduce(\n\t\t\t\t\t\t(total, entity) => (total += Number(entity.amount_client)),\n\t\t\t\t\t\t0\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetTotal() {\n\t\tif (!this.servicesCosts) {\n\t\t\treturn this.getServiceCost();\n\t\t}\n\t\treturn Math.floor(\n\t\t\tNumber(this.getServiceAditional()) +\n\t\t\tNumber(parseFloat(this.servicesCosts.amount_client))\n\t\t);\n\t}\n\n\topenMenu() {\n\t\tthis.menuController.open();\n\t}\n\n\tasync paymentForm() {\n\t\t//this.router.navigate([\"/user/servicio-pagar-forma\"]);\n\n\t\ttry {\n\t\t\tlet body = {\n\t\t\t\t//amount: this.getTotal(),\n\t\t\t\tamount: 1,\n\t\t\t};\n\t\t\tlet { data } = await axios.post(`${API}/client/payment-id`, body, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${this.grabbedUser.access_token}`,\n\t\t\t\t},\n\t\t\t});\n\t\t\tthis.solServ.setPaymentId(data.data.payment_id);\n\t\t\tthis.openKhipu(data.data.payment_id);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t}\n\n\tsetSelectedButton(type: PaymentMethodType) {\n\t\tthis.selectedButton = type;\n\t}\n\n\tgoToReport() {\n\t\tthis.router.navigate([\"/user/service-report\"]);\n\t}\n\n\tngOnDestroy() {\n\t\tthis.userSub.unsubscribe();\n\t}\n\n\topenKhipu(paymentId: string) {\n\t\tkhenshin.startByPaymentId(\n\t\t\tpaymentId,\n\t\t\t(success) => {\n\t\t\t\tconsole.log(success);\n\t\t\t\tthis.createPayment();\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t\talert(\"Error con el pago\");\n\t\t\t}\n\t\t);\n\t}\n\n\tgoToRateProfessional() {\n\t\tthis.router.navigate([\"/user/seval-prof\"]);\n\t}\n\n\tasync createPayment() {\n\t\ttry {\n\t\t\tlet loader = await this.lc.create({ message: \"Cargando ID de pago....\" });\n\t\t\tloader.present();\n\t\t\tlet body = {\n\t\t\t\trequest_service_id: this.solServ.solicitud.solicitudID,\n\t\t\t\tpayment_type_id: 1,\n\t\t\t\tgrossamount: this.getTotal(),\n\t\t\t};\n\t\t\tawait axios.post(`${API}/client/payment`, body, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${this.grabbedUser.access_token}`,\n\t\t\t\t},\n\t\t\t});\n\t\t\tawait loader.dismiss();\n\t\t\tthis.modalController\n\t\t\t\t.create({\n\t\t\t\t\tcomponent: SuccessModalComponent,\n\t\t\t\t\tcomponentProps: {\n\t\t\t\t\t\tmessage: \"¡EL PAGO HA SIDO EXISTOSO!\",\n\t\t\t\t\t\tsecondMessage: \"Recuerda evaluar el servicio.\",\n\t\t\t\t\t\tredirect: true,\n\t\t\t\t\t\tredirectUrl: \"/user/seval-prof\",\n\t\t\t\t\t},\n\t\t\t\t\tcssClass: \"modalSuccess\",\n\t\t\t\t})\n\t\t\t\t.then((modalEl) => {\n\t\t\t\t\tmodalEl.present();\n\t\t\t\t});\n\t\t} catch (error) {\n\t\t\talert(\"Error al registrar el pago\");\n\t\t}\n\t}\n\n\tasync validateIfRatingYet() {\n\t\ttry {\n\t\t\tlet response = await axios.get(\n\t\t\t\t`${API}/supplier/evaluation/done/${this.solServ.solicitud.solicitudID}`,\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Bearer ${this.grabbedUser.access_token}`,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tif (response.data && response.data.code === 200) {\n\t\t\t\tif (response.data.data && response.data.data.length > 0) {\n\t\t\t\t\tthis.showRateProfessional = response.data.data[0].evaluate === 0;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.showRateProfessional = false;\n\t\t}\n\t}\n}\n","export default \".title {\\n  font-size: 29px;\\n}\\n.title .small {\\n  font-size: 18px;\\n}\\n.text {\\n  font-size: 22px;\\n}\\n.subtitle {\\n  font-size: 18px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NlcnZpY2lvLXBhZ2FyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVJLGVBQUE7QUFBSjtBQUVJO0VBQ0ksZUFBQTtBQUFSO0FBR0E7RUFFSSxlQUFBO0FBREo7QUFHQTtFQUVJLGVBQUE7QUFESiIsImZpbGUiOiJzZXJ2aWNpby1wYWdhci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudGl0bGVcbntcbiAgICBmb250LXNpemU6IDI5cHg7XG5cbiAgICAuc21hbGwge1xuICAgICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgfVxufVxuLnRleHRcbntcbiAgICBmb250LXNpemU6IDIycHg7XG59XG4uc3VidGl0bGVcbntcbiAgICBmb250LXNpemU6IDE4cHg7XG59Il19 */\";","export default \"<ion-header>\\n  <ion-toolbar mode=\\\"ios\\\" color=\\\"primary\\\">\\n\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/user/solicitud-status\\\" text=\\\"\\\" icon=\\\"arrow-back\\\"></ion-back-button>\\n    </ion-buttons>\\n\\n    <ion-title class=\\\"title-toolbar text-center\\\">MÉTODO DE PAGO</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid fixed>\\n\\n    <!-- OMITIR POR EL MOMENTO BTN -->\\n    <ion-row class=\\\"ion-margin-bottom\\\" *ngIf=\\\"loadedService && loadedService.type_request !== 'URGENT'\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col>\\n        <ion-button size=\\\"5\\\" expand=\\\"block\\\" fill=\\\"outline\\\" (click)=\\\"goToReport()\\\"\\n          *ngIf=\\\"loadedService && loadedService.request_cost.length > 0\\\">\\n          <ion-icon slot=\\\"start\\\" name=\\\"document-text-outline\\\"></ion-icon>\\n          Ver informe de los servicios\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n    <!-- title  -->\\n    <ion-row>\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text color=\\\"primary\\\" class=\\\"title\\\">\\n          <b>Detalle del pago</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- servicios pactados  -->\\n    <ion-row>\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text class=\\\"text\\\">\\n          <b>Servicios pactados</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- costo  -->\\n    <ion-row>\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text color=\\\"primary\\\" class=\\\"title\\\">\\n          <b *ngIf=\\\"servicesCosts && servicesCosts.amount_client\\\">${{getServiceCost()}}</b>\\n          <b *ngIf=\\\"servicesCosts && !servicesCosts.amount_client\\\" class=\\\"small\\\">Aún no se ha asignado un costo</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- servicios adicionales  -->\\n    <ion-row *ngIf=\\\"loadedService && loadedService.type_request !== 'URGENT'\\\">\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text class=\\\"text\\\">\\n          <b>Servicios adicionales</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- costo  -->\\n    <ion-row *ngIf=\\\"servicesCosts && servicesCosts.addittional.length > 0 && loadedService.type_request !== 'URGENT'\\\">\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text color=\\\"primary\\\" class=\\\"title\\\">\\n          <b *ngIf=\\\"servicesCosts\\\">${{getServiceAditional()}}</b>\\n          <b *ngIf=\\\"!servicesCosts\\\" class=\\\"small\\\">Aún no se ha asignado un costo</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- empty aditionals  -->\\n    <ion-row *ngIf=\\\"servicesCosts && servicesCosts.addittional.length === 0 && loadedService.type_request !== 'URGENT'\\\">\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text color=\\\"primary\\\" class=\\\"title\\\">\\n          <b class=\\\"small\\\">No se tienen adicionales</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- servicios adicionales  -->\\n    <ion-row>\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text class=\\\"text ion-text-uppercase\\\">\\n          <b>TOTAL</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- costo  -->\\n    <ion-row>\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text color=\\\"danger\\\" class=\\\"title\\\">\\n          <b *ngIf=\\\"loadedService && loadedService.request_cost.length > 0\\\">${{getTotal()}}</b>\\n          <b *ngIf=\\\"loadedService && loadedService.request_cost.length === 0\\\" class=\\\"small\\\">No se ha asignado un\\n            costo</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- servicios adicionales  -->\\n    <ion-row *ngIf=\\\"isFinished\\\">\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text class=\\\"text ion-text-uppercase\\\">\\n          <b>REFERENCIA</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- costo  -->\\n    <ion-row *ngIf=\\\"isFinished\\\">\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text color=\\\"danger\\\" class=\\\"title\\\">\\n          <b>{{loadedService && loadedService.reference ? loadedService.reference : 'N/D'}}</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- Costo & pay BTNS-->\\n    <ion-row class=\\\"ion-margin-top\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-text class=\\\"main-color subtitle\\\"><b>{{isFinished ? 'Método de pago aplicado' : isFinished && selectedButton === 'credit' ? 'Métodos disponibles de pago' : ''}}</b>\\n        </ion-text>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n\\n      <ion-col size=\\\"12\\\" class=\\\"ion-text-center\\\">\\n        <section>\\n          <!-- btn -->\\n          <ion-button size=\\\"small\\\" [fill]=\\\"selectedButton === 'credit' ? 'outline' : 'outline'\\\"\\n            *ngIf=\\\"isFinished && selectedButton === 'credit'\\\">\\n            <ion-icon slot=\\\"start\\\" src=\\\"assets/icon/visa.svg\\\"></ion-icon>\\n            Tarjeta\\n          </ion-button>\\n\\n          <!-- btn -->\\n          <!--\\n          <ion-button size=\\\"small\\\" (click)=\\\"setSelectedButton('debit')\\\"  [fill]=\\\"selectedButton === 'debit' ? 'solid' : 'outline'\\\">\\n            <ion-icon slot=\\\"start\\\" src=\\\"assets/icon/mastercard.svg\\\"></ion-icon>\\n            Débito\\n          </ion-button>\\n          -->\\n\\n          <!-- btn -->\\n          <ion-button size=\\\"small\\\" [fill]=\\\"selectedButton === 'cash' ? 'outline' : 'outline'\\\"\\n            *ngIf=\\\"isFinished && selectedButton === 'cash'\\\">\\n            <ion-icon slot=\\\"start\\\" src=\\\"/assets/icon/ic_dollar_blank.svg\\\"></ion-icon>\\n            Efectivo\\n          </ion-button>\\n\\n          <!-- btn -->\\n          <!--\\n          <ion-button size=\\\"small\\\" (click)=\\\"setSelectedButton('transfer')\\\"\\n            [fill]=\\\"selectedButton === 'transfer' ? 'solid' : 'outline'\\\">\\n            <ion-icon slot=\\\"start\\\" src=\\\"/assets/icon/ic_money_blank.svg\\\"></ion-icon>\\n            Transferencia\\n          </ion-button>\\n          -->\\n\\n        </section>\\n      </ion-col>\\n\\n    </ion-row>\\n\\n    <!-- CONFIRMAR BTN -->\\n    <ion-row class=\\\"ion-margin-top\\\" *ngIf=\\\"!isFinished && selectedButton === 'credit'\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col>\\n        <!-- [disabled]=\\\"!servicesCosts\\\" -->\\n        <ion-button size=\\\"5\\\" expand=\\\"block\\\" class=\\\"ion-text-uppercase\\\" (click)=\\\"paymentForm()\\\">\\n          PAGAR\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n    <ion-row *ngIf=\\\"isFinished\\\" style=\\\"margin-top: 20px;\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-button size=\\\"10\\\" [disabled]=\\\"!showRateProfessional\\\" expand=\\\"block\\\" fill=\\\"solid\\\"\\n          class=\\\"ion-text-uppercase btn-rate\\\" (click)=\\\"goToRateProfessional()\\\">\\n          <ion-icon src=\\\"/assets/icon/ic_like.svg\\\" color=\\\"#ffffff\\\" class=\\\"main-color margin-right\\\"></ion-icon>\\n          &nbsp;&nbsp;{{showRateProfessional ? 'CALIFICAR EL SERVICIO' : 'YA HAS CALIFICADO AL PROFESIONAL'}}\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n  </ion-grid>\\n</ion-content>\";"],"sourceRoot":"webpack:///"}