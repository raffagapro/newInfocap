{"version":3,"sources":["webpack:///src/app/profesional/perfil/perfil.page.html","webpack:///src/app/profesional/perfil/perfil-routing.module.ts","webpack:///src/app/profesional/perfil/perfil.module.ts","webpack:///src/app/profesional/perfil/perfil.page.ts","webpack:///src/app/profesional/perfil/perfil.page.scss"],"names":["routes","path","component","PerfilPageRoutingModule","imports","forChild","exports","PerfilPageModule","declarations","base64toBlob","base64Data","contentType","sliceSize","byteCharacters","atob","bytesLength","length","slicesCount","Math","ceil","byteArrays","Array","sliceIndex","begin","end","min","bytes","offset","i","charCodeAt","Uint8Array","Blob","type","PerfilPage","us","lc","modalController","platform","imgPick","useInputPicker","userSub","loggedUser","subscribe","user","grabbedUser","headers","access_token","phone1","phone2","dbUserGrab","role","form","name","last_name","updateOn","validators","required","email","password","newPassword","confirmPassword","is","ckeckUpdateUser","token","a","get","Authorization","then","res","setValue","data","httpError","passError","value","split","lname","modUser","current_password","create","message","loadingEl","present","put","resData","dismiss","setUser","id","img_profile","cssClass","modalEl","err","isPluginAvailable","hiddenImgInputRef","nativeElement","click","Camera","getPhoto","quality","source","Prompt","correctOrientation","width","resultType","DataUrl","promptLabelPhoto","promptLabelPicture","promptLabelCancel","image","saveImgToApi","dataUrl","e","console","log","loadedFile","target","files","imageData","imgFile","replace","patchValue","formData","FormData","append","post","unsubscribe","selector","template"],"mappings":"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","file":"profesional-perfil-perfil-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/profesional/home\\\" text=\\\"\\\" icon=\\\"arrow-back\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title class=\\\"title-toolbar\\\">EDITAR USUARIO</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid>\\n    <!-- profile Img -->\\n    <ion-row class=\\\"imgCont\\\">\\n      <ion-col>\\n        <div class=\\\"ion-margin-start profileImg\\\" [ngStyle]=\\\"{'background-image': getUrl()}\\\">\\n        </div>\\n      </ion-col>\\n    </ion-row>\\n    <!-- edit icon -->\\n    <ion-row>\\n      <ion-col>\\n        <div class=\\\"rate-cont\\\" *ngIf=\\\"grabbedUser.id !== null\\\" (click)=\\\"onLoadImg()\\\">\\n          <ion-icon name=\\\"pencil\\\" class=\\\"profileIcon\\\"></ion-icon>\\n        </div>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- hidden file input -->\\n    <div style=\\\"display: none;\\\">\\n      <input type=\\\"file\\\" #hiddenImgInput *ngIf=\\\"useInputPicker\\\" (change)=\\\"onLoadImgFromInput($event)\\\">\\n    </div>\\n\\n    <!-- Register Inputs -->\\n    <form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onUpdateUser()\\\">\\n      <!-- nombre -->\\n      <ion-row>\\n        <ion-col size=\\\"12\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon name=\\\"person\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Nombre</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"text\\\" formControlName=\\\"name\\\"></ion-input>\\n          </ion-item>\\n          <!-- error  -->\\n          <ion-label *ngIf=\\\"form.get('name').hasError('required')\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> El nombre es requerido</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n      </ion-row>\\n\\n      <!-- email -->\\n      <ion-row>\\n        \\n        <ion-col size=\\\"12\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">\\n              <ion-icon name=\\\"mail\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Email</ion-text>\\n            </ion-label>\\n            <ion-input disabled type=\\\"text\\\" formControlName=\\\"email\\\"></ion-input>\\n          </ion-item>\\n          <!-- error requerido  -->\\n          <ion-label *ngIf=\\\"form.get('email').hasError('required')\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> El email es requerido</small>\\n            </ion-text>\\n          </ion-label>\\n          <!-- error email  -->\\n          <ion-label *ngIf=\\\"form.get('email').hasError('email')\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> El email no tiene el formato correcto</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n        \\n      </ion-row>\\n\\n      <!-- Número de contacto 1 -->\\n      <ion-row>\\n        \\n        <ion-col size=\\\"12\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon name=\\\"call\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Número de contacto 1</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"string\\\" formControlName=\\\"phone1\\\"></ion-input>\\n          </ion-item>\\n          <!-- error requerido  -->\\n          <ion-label *ngIf=\\\"form.get('phone1').hasError('required')\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> El Numero de contacto es requerido</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n        \\n      </ion-row>\\n\\n      <!-- Número de contacto 2 -->\\n      <ion-row>\\n        \\n        <ion-col size=\\\"12\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon name=\\\"call\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Número de contacto 2</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"string\\\" formControlName=\\\"phone2\\\"></ion-input>\\n          </ion-item>\\n        </ion-col>\\n        \\n      </ion-row>\\n\\n\\n      <!-- title -->\\n      <div style=\\\"height: 30px;\\\"></div>\\n      <ion-row class=\\\"ion-margin-top\\\">\\n        \\n        <ion-col size=\\\"12\\\" class=\\\"ion-text-center\\\">\\n          <ion-text class=\\\"main-color ion-text-uppercase title\\\"><b>CAMBIAR CONTRASEÑA</b></ion-text>\\n        </ion-col>\\n        \\n      </ion-row>\\n\\n      <!-- Contraseña actual -->\\n      <ion-row>\\n        \\n        <ion-col size=\\\"12\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon name=\\\"lock-closed\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Contraseña actual</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"password\\\" formControlName=\\\"password\\\"></ion-input>\\n          </ion-item>\\n          <!-- http error  -->\\n          <ion-label *ngIf=\\\"httpError\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> {{ httpError }}</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n        \\n      </ion-row>\\n\\n      <!-- Nueva contraseña -->\\n      <ion-row>\\n          \\n        <ion-col size=\\\"12\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon name=\\\"lock-closed\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Nueva contraseña</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"password\\\" formControlName=\\\"newPassword\\\"></ion-input>\\n          </ion-item>\\n          <!-- password error  -->\\n          <ion-label *ngIf=\\\"passError\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> {{ passError }}</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n        \\n      </ion-row>\\n\\n      <!-- Repetir nueva contraseña -->\\n      <ion-row>\\n        \\n        <ion-col size=\\\"12\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon name=\\\"lock-closed\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Repetir nueva contraseña</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"password\\\" formControlName=\\\"confirmPassword\\\"></ion-input>\\n          </ion-item>\\n          <!-- password error  -->\\n          <ion-label *ngIf=\\\"passError\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> {{ passError }}</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n        \\n      </ion-row>\\n\\n      <!-- BTN -->\\n      <ion-row class=\\\"ion-margin-top ion-margin-bottom\\\">\\n        \\n        <ion-col size=\\\"12\\\">\\n          <ion-button size=\\\"5\\\" expand=\\\"block\\\" class=\\\"ion-text-uppercase\\\" type=\\\"submit\\\" [disabled]=\\\"!form.valid\\\">\\n            GUARDAR CAMBIOS\\n          </ion-button>\\n        </ion-col>\\n        \\n      </ion-row>\\n    </form>\\n  </ion-grid>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PerfilPage } from './perfil.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PerfilPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PerfilPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PerfilPageRoutingModule } from './perfil-routing.module';\n\nimport { PerfilPage } from './perfil.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    // FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    PerfilPageRoutingModule\n  ],\n  declarations: [PerfilPage]\n})\nexport class PerfilPageModule {}\n","import { Component, ElementRef, EventEmitter, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { LoadingController, ModalController, Platform } from '@ionic/angular';\nimport { Subscription } from 'rxjs';\nimport { CameraResultType, CameraSource, Capacitor, Plugins } from '@capacitor/core';\n\nimport { User } from 'src/app/model/user.model';\nimport { UserService } from 'src/app/services/user.service';\nimport { API } from 'src/environments/environment';\nimport { SuccessModalComponent } from './success-modal/success-modal.component';\nimport axios from 'axios';\n\nfunction base64toBlob(base64Data, contentType) {\n  contentType = contentType || '';\n  const sliceSize = 1024;\n  const byteCharacters = atob(base64Data);\n  const bytesLength = byteCharacters.length;\n  const slicesCount = Math.ceil(bytesLength / sliceSize);\n  const byteArrays = new Array(slicesCount);\n\n  for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n    const begin = sliceIndex * sliceSize;\n    const end = Math.min(begin + sliceSize, bytesLength);\n\n    const bytes = new Array(end - begin);\n    for (let offset = begin, i = 0; offset < end; ++i, ++offset) {\n      bytes[i] = byteCharacters[offset].charCodeAt(0);\n    }\n    byteArrays[sliceIndex] = new Uint8Array(bytes);\n  }\n  return new Blob(byteArrays, { type: contentType });\n}\n\n@Component({\n  selector: 'app-perfil',\n  templateUrl: './perfil.page.html',\n  styleUrls: ['./perfil.page.scss'],\n})\nexport class PerfilPage implements OnInit, OnDestroy {\n  grabbedUser: User;\n  headers: String;\n  userSub: Subscription;\n  form: FormGroup;\n  httpError: string;\n  passError: string;\n  @Output() imgPick = new EventEmitter<string | File>();\n  selectedImage: string;\n  @ViewChild('hiddenImgInput') hiddenImgInputRef: ElementRef<HTMLInputElement>;\n  useInputPicker = false;\n\n  constructor(\n    private us: UserService,\n    private lc: LoadingController,\n    private modalController: ModalController,\n    private platform: Platform,\n  ) { }\n\n  ngOnInit() {\n    this.userSub = this.us.loggedUser.subscribe(user => {\n      this.grabbedUser = user;\n    });\n    //api headers\n    this.headers = 'Bearer ' + this.grabbedUser.access_token;\n    // updates to the most current info from DB\n    let phone1: string;\n    let phone2: string;\n    this.us.dbUserGrab(this.grabbedUser.access_token, this.grabbedUser.role);\n    if (this.grabbedUser.phone1 === '-') {\n      phone1 = null;\n    } else {\n      phone1 = this.grabbedUser.phone1;\n    }\n    if (this.grabbedUser.phone2 === '-') {\n      phone2 = null;\n    } else {\n      phone2 = this.grabbedUser.phone2;\n    }\n    this.form = new FormGroup({\n      name: new FormControl(this.grabbedUser.name + ' ' + this.grabbedUser.last_name, {\n        updateOn: 'blur',\n        validators: [Validators.required]\n      }),\n      email: new FormControl(this.grabbedUser.email, {\n        updateOn: 'blur',\n        validators: [Validators.required, Validators.email]\n      }),\n      phone1: new FormControl(phone1, {\n        updateOn: 'blur',\n        validators: [Validators.required]\n      }),\n      phone2: new FormControl(phone2, {\n        updateOn: 'blur',\n      }),\n      password: new FormControl(null, {\n        updateOn: 'blur',\n      }),\n      newPassword: new FormControl(null, {\n        updateOn: 'blur',\n      }),\n      confirmPassword: new FormControl(null, {\n        updateOn: 'blur',\n      }),\n    });\n    // platfrom check\n    if ((this.platform.is('mobile') && !this.platform.is('hybrid')) || this.platform.is('desktop')) {\n      this.useInputPicker = true;\n    }\n\n    this.ckeckUpdateUser(this.headers)\n  }\n\n  async ckeckUpdateUser(token) {\n    await axios.get(API + '/account/me', { headers: { Authorization: token } }).then(res => {\n      this.form.setValue({\n        name: res.data.data.name + ' ' + res.data.data.last_name,\n        email: res.data.data.email,\n        phone1: res.data.data.phone1,\n        phone2: res.data.data.phone2,\n        password: null,\n        newPassword: null,\n        confirmPassword: null,\n      });\n    })\n  }\n\n  onUpdateUser() {\n    this.httpError = null;\n    this.passError = null;\n    let name = this.form.value.name.split(\" \");\n    let lname = name[1];\n    if (name.length > 2) {\n      lname += ' ' + name[2];\n    }\n\n    const modUser = {\n      name: name[0],\n      last_name: lname,\n      email: this.form.value.email,\n      password: this.form.value.newPassword,\n      current_password: this.form.value.password,\n      phone1: this.form.value.phone1,\n      phone2: this.form.value.phone2\n    }\n    if (this.form.value.password === null) {\n      delete modUser.password;\n      delete modUser.current_password;\n    } else {\n      if (this.form.value.newPassword !== this.form.value.confirmPassword) {\n        this.passError = 'Las contraseñas no concuerdan';\n        return;\n      }\n    }\n\n    this.lc.create({\n      message: 'Alcualizando la informacion...'\n    }).then(loadingEl => {\n      loadingEl.present();\n      let headers = 'Bearer ' + this.grabbedUser.access_token;\n      axios.put(API + '/account', modUser, { headers: { Authorization: this.headers } }).then(resData => {\n        loadingEl.dismiss();\n        //update user controler\n        this.us.setUser(new User(\n          this.grabbedUser.id,\n          resData.data.data.name,\n          resData.data.data.last_name,\n          resData.data.data.img_profile,\n          resData.data.data.email,\n          resData.data.data.phone1,\n          resData.data.data.phone2,\n          this.grabbedUser.role,\n          this.grabbedUser.access_token,\n        ));\n        //resets values after succefull update\n        this.form.setValue({\n          name: this.form.value.name,\n          email: this.form.value.email,\n          phone1: this.form.value.phone1,\n          phone2: this.form.value.phone2,\n          password: null,\n          newPassword: null,\n          confirmPassword: null,\n        });\n        this.modalController.create({\n          component: SuccessModalComponent,\n          cssClass: 'modalSuccess',\n        }).then(modalEl => {\n          modalEl.present();\n        });\n      }).catch(err => {\n        loadingEl.dismiss();\n        this.httpError = err['error'].message;\n      })\n    });\n  }\n\n  onLoadImg() {\n    if (!Capacitor.isPluginAvailable('Camera') || this.useInputPicker) {\n      this.hiddenImgInputRef.nativeElement.click();\n      return;\n    }\n    Plugins.Camera.getPhoto({\n      quality: 100,\n      source: CameraSource.Prompt,\n      correctOrientation: true,\n      // height: 500,\n      width: 500,\n      resultType: CameraResultType.DataUrl,\n      promptLabelPhoto: 'Fotos',\n      promptLabelPicture: 'Cámara',\n      promptLabelCancel: 'Cancelar'\n    }).then(image => {\n      this.saveImgToApi(image.dataUrl);\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  getUrl() {\n    if (!this.grabbedUser.img_profile || this.grabbedUser.img_profile === '' || this.grabbedUser.img_profile === 'http://167.71.251.136/storage/') {\n      return \"url('assets/images/avatar.png')\"\n    } else {\n      return `url(${this.grabbedUser.img_profile})`\n    }\n  }\n\n  onLoadImgFromInput(e: Event) {\n    const loadedFile = (e.target as HTMLInputElement).files[0];\n    this.saveImgToApi(loadedFile);\n    //save img to api\n  }\n\n  saveImgToApi(imageData: string | File) {\n    let imgFile;\n    if (typeof imageData === 'string') {\n      try {\n        imgFile = base64toBlob(imageData.replace('data:image/jpeg;base64,', ''), 'image/jpeg');\n      } catch (e) {\n        console.log(e);\n        return;\n      }\n    } else {\n      imgFile = imageData;\n    }\n    this.form.patchValue({ image: imgFile })\n    const formData = new FormData();\n    formData.append('image', imgFile);\n    axios.post(API + '/account/image', formData, { headers: { Authorization: this.headers } }).then(resData => {\n      this.us.dbUserGrab(this.grabbedUser.access_token, this.grabbedUser.role);\n      this.modalController.create({\n        component: SuccessModalComponent,\n        cssClass: 'modalSuccess',\n      }).then(modalEl => {\n        modalEl.present();\n      });\n    }).catch(err => {\n      console.log(err);\n    })\n  }\n\n  ngOnDestroy() {\n    this.userSub.unsubscribe();\n  }\n\n}\n","export default \".profileImg {\\n  height: 120px;\\n  width: 120px;\\n  margin-left: auto;\\n  margin-right: auto;\\n  background-position: center;\\n  background-size: cover;\\n  background-repeat: no-repeat;\\n  border-radius: 50%;\\n}\\n\\n.imgCont {\\n  margin-top: 35px;\\n}\\n\\n.profileIcon {\\n  font-size: 16px;\\n  color: white;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n\\n.rate-cont {\\n  border-radius: 50px;\\n  height: 30px;\\n  width: 30px;\\n  background-color: #53657e;\\n  display: flex;\\n  align-items: center;\\n  text-align: center;\\n  margin-left: auto;\\n  margin-right: auto;\\n  margin-top: -22px;\\n}\\n\\nform {\\n  padding: 0 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3BlcmZpbC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxhQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSwyQkFBQTtFQUNBLHNCQUFBO0VBQ0EsNEJBQUE7RUFDQSxrQkFBQTtBQUNKOztBQUNFO0VBQ0UsZ0JBQUE7QUFFSjs7QUFBRTtFQUNFLGVBQUE7RUFDQSxZQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtBQUdKOztBQURFO0VBQ0UsbUJBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLHlCQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0EsaUJBQUE7QUFJSjs7QUFGRTtFQUNFLGVBQUE7QUFLSiIsImZpbGUiOiJwZXJmaWwucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnByb2ZpbGVJbWd7XG4gICAgaGVpZ2h0OiAxMjBweDtcbiAgICB3aWR0aDogMTIwcHg7XG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtcbiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICB9XG4gIC5pbWdDb250e1xuICAgIG1hcmdpbi10b3A6IDM1cHg7XG4gIH1cbiAgLnByb2ZpbGVJY29ue1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICB9XG4gIC5yYXRlLWNvbnR7XG4gICAgYm9yZGVyLXJhZGl1czogNTBweDtcbiAgICBoZWlnaHQ6IDMwcHg7XG4gICAgd2lkdGg6IDMwcHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzUzNjU3ZTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgICBtYXJnaW4tdG9wOiAtMjJweDtcbiAgfVxuICBmb3JtIHtcbiAgICBwYWRkaW5nOiAwIDIwcHg7XG4gIH1cbiAgXG4gICJdfQ== */\";"]}