{"version":3,"sources":["webpack:///src/app/profesional/notificaciones/notificaciones.page.ts","webpack:///src/app/profesional/notificaciones/notificaciones-routing.module.ts","webpack:///src/app/profesional/notificaciones/notificaciones.page.html","webpack:///src/app/profesional/notificaciones/notificaciones.module.ts","webpack:///src/app/profesional/notificaciones/notificaciones.page.scss"],"names":["NotificacionesPage","router","menuController","lc","us","loadingController","solServ","notificationService","notifications","userSub","loggedUser","subscribe","user","grabbedUser","headers","access_token","loadNotifications","create","message","loader","present","a","get","Authorization","response","data","notificationsData","filter","n","viewed","console","log","dismiss","solicitudId","notificationId","put","then","resData","setServiceID","updatedNotifications","map","notification","notification_Id","setNotifications","navigate","err","enable","open","selector","template","routes","path","component","NotificacionesPageRoutingModule","imports","forChild","exports","NotificacionesPageModule","declarations"],"mappings":"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","file":"profesional-notificaciones-notificaciones-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { LoadingController, MenuController } from '@ionic/angular';\nimport { Subscription } from 'rxjs';\nimport { User } from 'src/app/model/user.model';\nimport { UserService } from 'src/app/services/user.service';\nimport { API } from 'src/environments/environment';\nimport { Notification } from 'src/shared/types/Notification';\nimport axios from 'axios'\nimport { Router } from '@angular/router';\nimport { SolicitudService } from 'src/app/services/solicitud.service';\nimport { NotificationsService } from 'src/app/services/notifications-service';\n\n@Component({\n  selector: 'app-notificaciones',\n  templateUrl: './notificaciones.page.html',\n  styleUrls: ['./notificaciones.page.scss'],\n})\nexport class NotificacionesPage implements OnInit {\n\n  grabbedUser: User;\n  userSub: Subscription;\n  headers: String;\n  notifications: Notification[] = [];\n\n  constructor(\n    private router: Router,\n    private menuController: MenuController,\n    private lc: LoadingController,\n    private us: UserService,\n    private loadingController: LoadingController,\n    private solServ: SolicitudService,\n    private notificationService: NotificationsService,\n  ) { }\n\n  ngOnInit() {\n    this.userSub = this.us.loggedUser.subscribe(user => {\n      this.grabbedUser = user;\n      this.headers = 'Bearer ' + this.grabbedUser.access_token;\n      this.loadNotifications()\n    });\n  }\n\n  async loadNotifications() {\n    let loader = await this.loadingController.create({ message: 'Cargando tus notificaciones...' });\n    loader.present();\n    try {\n      let response = await axios.get(\n        `${API}/supplier/notification`,\n        {\n          headers: {\n            Authorization: `Bearer ${this.grabbedUser.access_token}`\n          }\n        }\n      );\n      const { data } = response;\n      const { data: notificationsData } = data;\n      this.notifications = notificationsData.filter(n => n.viewed == 0);\n    } catch (error) {\n      console.log(error)\n    } finally {\n      loader.dismiss();\n    }\n  }\n\n  async goToRequestDetail(solicitudId: string, notificationId: number) {\n    axios.put(API + `/notification/view/${notificationId}`, { viewed: 1, },{ headers: { Authorization: `Bearer ${this.grabbedUser.access_token}` } }).then(resData => {\n      this.solServ.setServiceID(solicitudId);\n\n      \n      let updatedNotifications = this.notifications.map((notification: Notification) => {\n        if (notification.notification_Id === notificationId) {\n          notification.viewed = true;\n        }\n        return notification;\n      });\n\n\n      this.notificationService.setNotifications(updatedNotifications);\n      this.router.navigate(['profesional/agendados/agendados-detail']);\n    }).catch(err => {\n      console.log(err)\n    })\n  }\n\n  ionViewWillEnter() {\n    this.menuController.enable(true, 'profesional');\n  }\n\n  openMenu() {\n    this.menuController.open();\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NotificacionesPage } from './notificaciones.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificacionesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NotificacionesPageRoutingModule {}\n","export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/profesional/home\\\" text=\\\"\\\" icon=\\\"arrow-back\\\"></ion-back-button>\\n    </ion-buttons>\\n\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button class=\\\"homeBtn\\\" (click)=\\\"openMenu()\\\">\\n        <ion-icon name=\\\"menu\\\" class=\\\"homeBtn\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n\\n    <ion-title class=\\\"title-toolbar\\\">NOTIFICACIONES</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <div class=\\\"text-center\\\" *ngIf=\\\"notifications.length === 0\\\">\\n    <p>No se tienen notificaciones</p>\\n  </div>\\n\\n  <!-- notificacion item -->\\n  <div class=\\\"prof-cont mt-25 no-border\\\" *ngFor=\\\"let notification of notifications\\\">\\n    <ion-grid (click)=\\\"goToRequestDetail(notification.request_service_id, notification.notification_Id)\\\">\\n      <ion-row class=\\\"ion-align-items-center\\\">\\n        <!-- title -->\\n        <ion-col size=\\\"7\\\" class=\\\"ion-justify-content-center\\\">\\n          <ion-text>\\n            <!-- <span class=\\\"titleSelect main-color\\\">Cerrajería </span><br> -->\\n            <ion-badge color=\\\"primary\\\" class=\\\"titleSelect\\\">{{ notification.category }}</ion-badge>&nbsp;\\n            <ion-icon color=\\\"primary\\\" src=\\\"/assets/icon/ic_date_range.svg\\\" class=\\\"icon-size\\\"></ion-icon><br>\\n            <span class=\\\"textSelect\\\">\\n              {{ notification.motive }}\\n            </span><br>\\n            <small class=\\\"main-color\\\"></small>\\n          </ion-text>\\n        </ion-col>\\n        <ion-col size=\\\"1\\\"></ion-col>\\n\\n        <!-- rating -->\\n        <ion-col size=\\\"4\\\" class=\\\"ion-text-center\\\">\\n          <div class=\\\"ion-text-end\\\">\\n            <small class=\\\"ticket\\\">Solicitud #{{notification.ticket_number}}</small>\\n          </div>\\n          <ion-text>\\n            <small class=\\\"ratingText main-color ion-text-center\\\">\\n              {{ notification.time }}\\n            </small>\\n          </ion-text>\\n        </ion-col>\\n\\n      </ion-row>\\n    </ion-grid>\\n  </div>\\n\\n  <!-- notificacion item -->\\n  <!-- <div class=\\\"prof-cont mt-25 no-border\\\">\\n    <ion-grid>\\n      <ion-row class=\\\"ion-align-items-center\\\">\\n\\n        <ion-col size=\\\"7\\\" class=\\\"ion-justify-content-center\\\">\\n          <ion-text>\\n            <span class=\\\"titleSelect main-color\\\">Cerrajería </span><br>\\n            <ion-badge color=\\\"primary\\\" class=\\\"titleSelect\\\">Soldadura</ion-badge>&nbsp;\\n            <ion-icon color=\\\"medium\\\" src=\\\"/assets/icon/ic_engine_disabled.svg\\\" class=\\\"icon-size\\\"></ion-icon><br>\\n            <span class=\\\"textSelect\\\">\\n              La fecha límite de un servicio está por llegar.\\n            </span><br>\\n            <small class=\\\"main-color\\\">Rejas</small>\\n          </ion-text>\\n        </ion-col>\\n        <ion-col size=\\\"1\\\"></ion-col>\\n\\n        <ion-col size=\\\"4\\\" class=\\\"ion-text-center\\\">\\n          <div class=\\\"ion-text-end\\\">\\n            <small class=\\\"ticket\\\">Ticket #100091234</small>\\n          </div>\\n          <ion-text>\\n            <small class=\\\"ratingText main-color ion-text-center\\\">\\n              16 dic 2020\\n            </small>\\n          </ion-text>\\n        </ion-col>\\n\\n      </ion-row>\\n    </ion-grid>\\n  </div> -->\\n\\n  <!-- notificacion item -->\\n  <!-- <div class=\\\"prof-cont mt-25 no-border\\\">\\n    <ion-grid>\\n      <ion-row class=\\\"ion-align-items-center\\\">\\n        <ion-col size=\\\"7\\\" class=\\\"ion-justify-content-center\\\">\\n          <ion-text>\\n            <span class=\\\"titleSelect main-color\\\">Cerrajería </span><br>\\n            <ion-badge color=\\\"danger\\\" class=\\\"titleSelect\\\">Cerrajería</ion-badge>&nbsp;\\n            <ion-icon color=\\\"danger\\\" name=\\\"alert-circle\\\" class=\\\"icon-size\\\"></ion-icon><br>\\n            <span class=\\\"textSelect\\\">\\n              Santiago Pérez está en busca de un servicio urgente.\\n            </span><br>\\n            <small class=\\\"red-color\\\">Cambio de chapas</small>\\n          </ion-text>\\n        </ion-col>\\n        <ion-col size=\\\"1\\\"></ion-col>\\n\\n        <ion-col size=\\\"4\\\" class=\\\"ion-text-center\\\">\\n          <div class=\\\"ion-text-end\\\">\\n            <small class=\\\"ticket\\\">Ticket #100091234</small>\\n          </div>\\n          <ion-text>\\n            <small class=\\\"ratingText main-color ion-text-center\\\">\\n              16 dic 2020\\n            </small>\\n          </ion-text>\\n        </ion-col>\\n\\n      </ion-row>\\n    </ion-grid>\\n  </div> -->\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NotificacionesPageRoutingModule } from './notificaciones-routing.module';\n\nimport { NotificacionesPage } from './notificaciones.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NotificacionesPageRoutingModule\n  ],\n  declarations: [NotificacionesPage]\n})\nexport class NotificacionesPageModule {}\n","export default \".prof-cont {\\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\\n}\\n\\n.titleSelect {\\n  font-size: 16px;\\n  font-weight: bold;\\n  padding: 5px 20px;\\n}\\n\\n.mt-25 {\\n  margin-top: 25px;\\n}\\n\\n.icon-size {\\n  margin-top: -3px;\\n  font-size: 20px;\\n}\\n\\n.miniText {\\n  color: #39ae50;\\n}\\n\\n.red-color {\\n  color: #eb445a;\\n}\\n\\n.textSelect {\\n  font-size: 10px;\\n  line-height: 0.5;\\n}\\n\\n.ticket {\\n  color: #eb445a;\\n  font-size: 11px;\\n}\\n\\n.locate-cont {\\n  margin-top: 5px;\\n  border-radius: 50px;\\n  height: 30px;\\n  width: 30px;\\n  display: inline-flex;\\n  align-items: center;\\n  text-align: center;\\n  margin-left: auto;\\n  margin-right: auto;\\n  background-color: #009ace;\\n}\\n\\n.rating-text {\\n  font-size: 12px;\\n  margin-left: auto;\\n  margin-right: auto;\\n  display: inline-flex;\\n}\\n\\n.ratingText {\\n  font-size: 14px;\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.red-text {\\n  color: #eb445a;\\n}\\n\\n.gray-text {\\n  color: #757575;\\n}\\n\\n.blue-text {\\n  color: #009ace;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL25vdGlmaWNhY2lvbmVzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHdFQUFBO0FBQ0o7O0FBQ0E7RUFDSSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSxpQkFBQTtBQUVKOztBQUFBO0VBQ0ksZ0JBQUE7QUFHSjs7QUFEQTtFQUNJLGdCQUFBO0VBQ0EsZUFBQTtBQUlKOztBQUZBO0VBQ0ksY0FBQTtBQUtKOztBQUhBO0VBQ0ksY0FBQTtBQU1KOztBQUpBO0VBQ0ksZUFBQTtFQUNBLGdCQUFBO0FBT0o7O0FBTEE7RUFDSSxjQUFBO0VBQ0EsZUFBQTtBQVFKOztBQU5BO0VBQ0ksZUFBQTtFQUNBLG1CQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7RUFDQSxvQkFBQTtFQUNBLG1CQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0EseUJBQUE7QUFTSjs7QUFQQTtFQUNJLGVBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0Esb0JBQUE7QUFVSjs7QUFSQTtFQUNJLGVBQUE7RUFDQSxTQUFBO0VBQ0EsVUFBQTtBQVdKOztBQVRBO0VBQ0ksY0FBQTtBQVlKOztBQVZBO0VBQ0ksY0FBQTtBQWFKOztBQVhBO0VBQ0ksY0FBQTtBQWNKIiwiZmlsZSI6Im5vdGlmaWNhY2lvbmVzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5wcm9mLWNvbnQge1xuICAgIGJveC1zaGFkb3c6IDAgM3B4IDZweCByZ2JhKDAsIDAsIDAsIDAuMTYpLCAwIDNweCA2cHggcmdiYSgwLCAwLCAwLCAwLjIzKTtcbn1cbi50aXRsZVNlbGVjdCB7XG4gICAgZm9udC1zaXplOiAxNnB4O1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIHBhZGRpbmc6IDVweCAyMHB4O1xufVxuLm10LTI1IHtcbiAgICBtYXJnaW4tdG9wOiAyNXB4O1xufVxuLmljb24tc2l6ZSB7XG4gICAgbWFyZ2luLXRvcDogLTNweDtcbiAgICBmb250LXNpemU6IDIwcHg7XG59XG4ubWluaVRleHQge1xuICAgIGNvbG9yOiAjMzlhZTUwO1xufVxuLnJlZC1jb2xvciB7XG4gICAgY29sb3I6ICNlYjQ0NWE7XG59XG4udGV4dFNlbGVjdCB7XG4gICAgZm9udC1zaXplOiAxMHB4O1xuICAgIGxpbmUtaGVpZ2h0OiAwLjU7XG59XG4udGlja2V0IHtcbiAgICBjb2xvcjogI2ViNDQ1YTtcbiAgICBmb250LXNpemU6IDExcHg7XG59XG4ubG9jYXRlLWNvbnQge1xuICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICBib3JkZXItcmFkaXVzOiA1MHB4O1xuICAgIGhlaWdodDogMzBweDtcbiAgICB3aWR0aDogMzBweDtcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwOWFjZTtcbn1cbi5yYXRpbmctdGV4dCB7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbn1cbi5yYXRpbmdUZXh0IHtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgbWFyZ2luOiAwO1xuICAgIHBhZGRpbmc6IDA7XG59XG4ucmVkLXRleHR7XG4gICAgY29sb3I6ICNlYjQ0NWE7XG59XG4uZ3JheS10ZXh0IHtcbiAgICBjb2xvcjogIzc1NzU3NTtcbn1cbi5ibHVlLXRleHQge1xuICAgIGNvbG9yOiAjMDA5YWNlO1xufVxuIl19 */\";"]}