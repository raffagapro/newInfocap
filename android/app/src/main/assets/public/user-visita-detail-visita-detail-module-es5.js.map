{"version":3,"sources":["webpack:///src/app/user/visita-detail/visita-detail.page.html","webpack:///src/app/user/visita-detail/visita-detail.module.ts","webpack:///src/app/user/visita-detail/visita-detail.page.scss","webpack:///src/app/user/visita-detail/visita-detail-routing.module.ts","webpack:///src/app/user/visita-detail/visita-detail.page.ts"],"names":["VisitaDetailPageModule","imports","declarations","routes","path","component","VisitaDetailPageRoutingModule","forChild","exports","VisitaDetailPage","modalController","router","loadingController","userService","menuController","solServ","loadedService","categoryName","cummunename","category_id","created_date","date_required","descProf","description","hours_professional","hours_requestservice","img_profile","professional_profiles_id","request_id","status_id","status_name","status_order","supplierLastName","supplierName","supplier_id","ticket_number","user_client_id","work_days","suplierPhone1","img_request","slideOptions","initialSlide","slidesPerView","autoplay","showButtons","error","errorMessage","userSubscription","loggedUser","subscribe","user","loadService","enable","create","message","loader","present","a","get","solicitud","solicitudID","headers","Authorization","access_token","response","setServiceObj","data","length","console","log","dismiss","open","date","dateFormat","useTimezone","momentDate","tz","guess","format","hours","split","startHour","endHour","client_accepted","post","status","componentProps","redirect","cssClass","successModal","image","selector","template"],"mappings":"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","file":"user-visita-detail-visita-detail-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar mode=\\\"ios\\\" color=\\\"primary\\\">\\n\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/user/solicitudes\\\" text=\\\"\\\" icon=\\\"arrow-back\\\"></ion-back-button>\\n    </ion-buttons>\\n\\n    <ion-title class=\\\"title-toolbar text-center\\\">VISITA TÉCNICA</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <!-- profesional card item -->\\n  <div class=\\\"no-border ion-margin-top\\\">\\n    <ion-grid>\\n      <ion-row class=\\\"ion-align-items-center\\\">\\n        <!-- profile img -->\\n        <ion-col size=\\\"4\\\" offset=\\\"1\\\">\\n          <ion-avatar class=\\\"profileImg\\\">\\n            <img src=\\\"{{ loadedService.img_profile || '/assets/images/avatar.png'}}\\\" />\\n          </ion-avatar>\\n        </ion-col>\\n\\n        <!-- title -->\\n        <ion-col size=\\\"6\\\">\\n          <ion-text>\\n            <span class=\\\"titleSelect main-color\\\">{{loadedService.categoryName}} de {{loadedService.supplierName}}\\n              {{loadedService.supplierLastName}}</span><br>\\n            <p class=\\\"main-color mini-text\\\" style=\\\"margin-top: 0; margin-bottom: 0;\\\">\\n              {{formatDate(loadedService.created_date, 'DD/MM/YYYY', true)}}</p>\\n          </ion-text>\\n        </ion-col>\\n\\n      </ion-row>\\n    </ion-grid>\\n  </div>\\n\\n  <ion-grid>\\n\\n    <!-- title -->\\n    <ion-row>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-text class=\\\"main-color title\\\"><b>Trabajo a realizar</b></ion-text>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-text class=\\\"titleText\\\">\\n          {{loadedService.description}}\\n        </ion-text>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n    <!-- Slider -->\\n    <ion-row class=\\\"\\\" *ngIf=\\\"loadedService.img_request.length > 0\\\">\\n      <ion-col size=\\\"12\\\">\\n        <ion-slides [options]=\\\"slideOptions\\\">\\n          <!-- slide -->\\n          <ion-slide *ngFor=\\\"let image of loadedService.img_request\\\">\\n            <img (click)=\\\"openImage(image.image)\\\" src=\\\"{{ image.image }}\\\" class=\\\"imgSlide\\\">\\n          </ion-slide>\\n\\n        </ion-slides>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- Fecha de visita -->\\n    <ion-row>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-text class=\\\"main-color subtitle\\\"><b>Fecha de visita</b></ion-text>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-icon src=\\\"/assets/icon/ic_date_range.svg\\\" class=\\\"main-color iconFix\\\"></ion-icon>\\n        <ion-text class=\\\"subText\\\"> {{formatDate(loadedService.date_required)}}</ion-text>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n    <!-- Rango de horas -->\\n    <ion-row class=\\\"ion-margin-top\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-text class=\\\"main-color subtitle\\\"><b>Rango de horas</b></ion-text>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-icon src=\\\"/assets/icon/ic_schedule.svg\\\" class=\\\"main-color iconFix\\\"></ion-icon>\\n        <ion-text class=\\\"subText\\\"> {{formatTime()}}</ion-text>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n    <!-- eceptar visita BTN -->\\n    <ion-row class=\\\"ion-margin-top\\\" *ngIf=\\\"showButtons\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col>\\n        <ion-button size=\\\"5\\\" expand=\\\"block\\\" class=\\\"ion-text-uppercase\\\" (click)=\\\"confirmVisit(1)\\\">\\n          ACEPTAR VISITA\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n    <!-- imitir por el momento BTN -->\\n    <ion-row class=\\\"ion-margin-bottom\\\" *ngIf=\\\"showButtons\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col>\\n        <ion-button size=\\\"5\\\" expand=\\\"block\\\" fill=\\\"outline\\\" class=\\\"ion-text-uppercase\\\" (click)=\\\"confirmVisit(0)\\\">\\n          OMITIR POR EL MOMENTO\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n  </ion-grid>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { VisitaDetailPageRoutingModule } from './visita-detail-routing.module';\n\nimport { VisitaDetailPage } from './visita-detail.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    VisitaDetailPageRoutingModule\n  ],\n  declarations: [VisitaDetailPage]\n})\nexport class VisitaDetailPageModule {}\n","export default \".no-border {\\n  padding-top: 2px;\\n  padding-bottom: 2px;\\n}\\n\\n.profileImg {\\n  margin-left: 10px;\\n  height: 75px;\\n  width: 75px;\\n}\\n\\n.titleSelect {\\n  font-size: 23px;\\n  font-weight: bold;\\n}\\n\\n.title {\\n  font-size: 20px;\\n}\\n\\n.titleText {\\n  font-size: 16px;\\n}\\n\\n.imgSlide {\\n  height: 125px;\\n}\\n\\n.subtitle {\\n  font-size: 18px;\\n}\\n\\n.subText {\\n  font-size: 14px;\\n}\\n\\n.minusMargin {\\n  margin-top: -25px;\\n}\\n\\n.iconFix {\\n  margin-bottom: -3px;\\n}\\n\\n.mini-text {\\n  font-size: 14px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Zpc2l0YS1kZXRhaWwucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZ0JBQUE7RUFDQSxtQkFBQTtBQUNKOztBQUNBO0VBQ0ksaUJBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtBQUVKOztBQUFBO0VBQ0ksZUFBQTtFQUNBLGlCQUFBO0FBR0o7O0FBREE7RUFDSSxlQUFBO0FBSUo7O0FBRkE7RUFDSSxlQUFBO0FBS0o7O0FBSEE7RUFDSSxhQUFBO0FBTUo7O0FBSkE7RUFDSSxlQUFBO0FBT0o7O0FBTEE7RUFDSSxlQUFBO0FBUUo7O0FBTkE7RUFDSSxpQkFBQTtBQVNKOztBQVBBO0VBQ0ksbUJBQUE7QUFVSjs7QUFSQTtFQUVJLGVBQUE7QUFVSiIsImZpbGUiOiJ2aXNpdGEtZGV0YWlsLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5uby1ib3JkZXJ7XG4gICAgcGFkZGluZy10b3A6IDJweDtcbiAgICBwYWRkaW5nLWJvdHRvbTogMnB4O1xufVxuLnByb2ZpbGVJbWd7XG4gICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgaGVpZ2h0OiA3NXB4O1xuICAgIHdpZHRoOiA3NXB4O1xufVxuLnRpdGxlU2VsZWN0e1xuICAgIGZvbnQtc2l6ZTogMjNweDtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbn1cbi50aXRsZXtcbiAgICBmb250LXNpemU6IDIwcHg7XG4gIH1cbi50aXRsZVRleHR7XG4gICAgZm9udC1zaXplOiAxNnB4O1xufVxuLmltZ1NsaWRle1xuICAgIGhlaWdodDoxMjVweDtcbn1cbi5zdWJ0aXRsZXtcbiAgICBmb250LXNpemU6IDE4cHg7XG59XG4uc3ViVGV4dHtcbiAgICBmb250LXNpemU6IDE0cHg7XG59XG4ubWludXNNYXJnaW57XG4gICAgbWFyZ2luLXRvcDogLTI1cHg7XG59XG4uaWNvbkZpeHtcbiAgICBtYXJnaW4tYm90dG9tOiAtM3B4O1xufVxuLm1pbmktdGV4dFxue1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbn0iXX0= */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { VisitaDetailPage } from './visita-detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: VisitaDetailPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class VisitaDetailPageRoutingModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { LoadingController, MenuController, ModalController } from '@ionic/angular';\nimport axios from 'axios';\nimport { SolicitudService } from 'src/app/services/solicitud.service';\nimport { API } from 'src/environments/environment';\nimport { Subscription } from 'rxjs';\nimport { User } from 'src/app/model/user.model';\nimport { UserService } from 'src/app/services/user.service';\nimport { Moment } from 'moment';\nimport * as moment from 'moment';\nimport { SuccessModalComponent } from 'src/app/shared/success-modal/success-modal.component';\nimport { ImageModalComponent } from 'src/app/shared/image-modal/image-modal.component';\n\n@Component({\n  selector: 'app-visita-detail',\n  templateUrl: './visita-detail.page.html',\n  styleUrls: ['./visita-detail.page.scss'],\n})\nexport class VisitaDetailPage implements OnInit {\n  userSubscription: Subscription;\n  user: User;\n  loadedService = {\n    categoryName: null,\n    cummunename: null,\n    category_id: null,\n    created_date: null,\n    date_required: null,\n    descProf: null,\n    description: null,\n    hours_professional: null,\n    hours_requestservice: null,\n    img_profile: null,\n    professional_profiles_id: null,\n    request_id: null,\n    status_id: null,\n    status_name: null,\n    status_order: null,\n    supplierLastName: null,\n    supplierName: null,\n    supplier_id: null,\n    ticket_number: null,\n    user_client_id: null,\n    work_days: null,\n    suplierPhone1: null,\n    img_request: [],\n  };\n  slideOptions = {\n    initialSlide: 0,\n    slidesPerView: 2,\n    autoplay: true\n  };\n\n  showButtons: boolean = true;\n  error: boolean = false;\n  errorMessage: string = '';\n\n  constructor(\n    private modalController: ModalController,\n    private router: Router,\n    private loadingController: LoadingController,\n    private userService: UserService,\n    private menuController: MenuController,\n    private solServ: SolicitudService,\n  ) { }\n\n  ngOnInit() {\n    this.userSubscription = this.userService.loggedUser.subscribe(user => {\n      this.user = user;\n      this.loadService();\n    });\n  }\n\n  ionViewWillEnter() {\n    this.menuController.enable(true, 'user');\n  }\n\n  async loadService() {\n    let loader = await this.loadingController.create({ message: '' });\n\n    try {\n      await loader.present();\n      let response = await axios.get(\n        `${API}/client/requestservice/${this.solServ.solicitud.solicitudID}`,\n        {\n          headers: {\n            Authorization: `Bearer ${this.user.access_token}`\n          }\n        }\n      );\n      this.solServ.setServiceObj(response.data.data);\n      this.loadedService = response.data.data;\n      if (this.loadedService.img_request.length < 2) {\n        this.slideOptions.slidesPerView = 1;\n      }\n      this.showButtons = this.loadedService.status_id === 2\n    } catch (error) {\n      console.log(error);\n    } finally {\n      loader.dismiss();\n    }\n  }\n\n  openMenu() {\n    this.menuController.open();\n  }\n\n  formatDate(date: Moment, dateFormat: any = 'YYYY-MM-DD', useTimezone: boolean = false) {\n    let momentDate = moment.utc(date, dateFormat);\n    if (useTimezone) {\n      momentDate.tz(moment.tz.guess())\n    }\n    return momentDate.format('dddd D [de] MMMM [de] YYYY');\n  }\n\n  formatTime() {\n    if (!this.loadedService.hours_requestservice) {\n      return 'ND';\n    }\n    let hours = this.loadedService.hours_requestservice.split('/');\n    let startHour = moment(hours[0]);\n    let endHour = moment(hours[1]);\n    return `${startHour.format('h:mm a')} - ${endHour.format('h:mm a')}`;\n  }\n\n  async confirmVisit(client_accepted: number) {\n    let loader = await this.loadingController.create({\n      message: 'Enviando información...'\n    });\n    loader.present();\n    try {\n      let response = await axios.post(\n        `${API}/client/requesttechnical/${this.solServ.solicitud.solicitudID}`,\n        {\n          client_accepted,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${this.user.access_token}`\n          }\n        }\n      );\n      if (response.data && response.data.status !== 200) {\n        this.error = false;\n        this.errorMessage = 'Ocurrió un error al enviar la solicitud.';\n      }\n    } catch (error) {\n      this.error = true;\n    }\n    loader.dismiss();\n\n    if (!this.error) {\n      this.showButtons = false;\n      let message = client_accepted === 1 ? 'HAZ ACEPTADO LA VISITA TÉCNICA' : 'HAZ OMITIDO LA VISITA TÉCNICA';\n      const successModal = await this.modalController.create({\n        component: SuccessModalComponent,\n        componentProps: {\n          message,\n          redirect: false,\n        },\n        cssClass: 'modalSuccess',\n      });\n      successModal.present();\n    }\n  }\n\n  async openImage(image: string) {\n    const successModal = await this.modalController.create({\n      component: ImageModalComponent,\n      componentProps: {\n        image,\n      },\n      cssClass: 'modalImage',\n    });\n    successModal.present();\n  }\n\n}\n"]}