{"version":3,"sources":["webpack:///src/app/user/profile-page/profile-page-routing.module.ts","webpack:///src/app/user/profile-page/profile-page.page.html","webpack:///src/app/user/profile-page/profile-page.page.scss","webpack:///src/app/user/profile-page/profile-page.page.ts","webpack:///src/app/user/profile-page/profile-page.module.ts"],"names":["routes","path","component","ProfilePagePageRoutingModule","imports","forChild","exports","base64toBlob","base64Data","contentType","sliceSize","byteCharacters","atob","bytesLength","length","slicesCount","Math","ceil","byteArrays","Array","sliceIndex","begin","end","min","bytes","offset","i","charCodeAt","Uint8Array","Blob","type","ProfilePagePage","us","lc","http","modalController","platform","imgPick","useInputPicker","countryCodes","getCountryCodes","loadFlags","bind","userSub","loggedUser","subscribe","user","grabbedUser","headers","set","access_token","phone1","phone2","countryCode","splitedPhone","split","console","log","form","name","last_name","updateOn","validators","required","email","password","newPassword","confirmPassword","is","httpError","passError","value","lname","modUser","current_password","create","message","then","loadingEl","present","put","resData","dismiss","setUser","id","img_profile","role","setValue","componentProps","redirect","cssClass","modalEl","e","isPluginAvailable","hiddenImgInputRef","nativeElement","click","getPhoto","quality","source","Prompt","correctOrientation","height","resultType","DataUrl","promptLabelPhoto","promptLabelPicture","promptLabelCancel","image","saveImgToApi","dataUrl","loadedFile","target","files","a","get","response","data","imageData","imgFile","replace","patchValue","formData","FormData","append","post","dbUserGrab","err","unsubscribe","token","img","setTimeout","radios","document","getElementsByClassName","index","element","innerHTML","flag","selector","template","ProfilePagePageModule","declarations"],"mappings":"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","file":"user-profile-page-profile-page-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ProfilePagePage } from './profile-page.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePagePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProfilePagePageRoutingModule {}\n","export default \"<ion-header>\\n  <ion-toolbar mode=\\\"ios\\\" color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/user/home\\\" text=\\\"\\\" icon=\\\"arrow-back\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title class=\\\"title-toolbar\\\">EDITAR USUARIO</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid>\\n\\n    <!-- profile Img -->\\n    <ion-row class=\\\"imgCont\\\">\\n      <ion-col>\\n        <ion-avatar class=\\\"ion-margin-start profileImg\\\">\\n          <ion-img [src]=\\\"getProfilePicture()\\\"></ion-img>\\n        </ion-avatar>\\n      </ion-col>\\n    </ion-row>\\n    <!-- edit icon -->\\n    <ion-row>\\n      <ion-col>\\n        <div class=\\\"rate-cont\\\" *ngIf=\\\"grabbedUser.id !== null\\\" (click)=\\\"onLoadImg()\\\">\\n          <ion-icon name=\\\"pencil\\\" class=\\\"profileIcon\\\"></ion-icon>\\n        </div>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- hidden file input -->\\n    <div style=\\\"display: none;\\\">\\n      <input type=\\\"file\\\" #hiddenImgInput *ngIf=\\\"useInputPicker\\\" (change)=\\\"onLoadImgFromInput($event)\\\">\\n    </div>\\n\\n    <!-- Register Inputs -->\\n    <form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onUpdateUser()\\\">\\n      <!-- nombre -->\\n      <ion-row>\\n        <ion-col size=\\\"12\\\">\\n          <ion-item class=\\\"ion-no-padding\\\">\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon name=\\\"person\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Nombre</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"text\\\" formControlName=\\\"name\\\"></ion-input>\\n          </ion-item>\\n          <!-- error  -->\\n          <ion-label *ngIf=\\\"form.get('name').hasError('required')\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> El nombre es requerido</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n      </ion-row>\\n\\n      <!-- email -->\\n      <ion-row>\\n        <ion-col size=\\\"12\\\">\\n          <ion-item class=\\\"ion-no-padding\\\">\\n            <ion-label position=\\\"floating\\\">\\n              <ion-icon src=\\\"/assets/icon/ic_mail.svg\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Email</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"text\\\" disabled formControlName=\\\"email\\\"></ion-input>\\n          </ion-item>\\n          <!-- error requerido  -->\\n          <ion-label *ngIf=\\\"form.get('email').hasError('required')\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> El email es requerido</small>\\n            </ion-text>\\n          </ion-label>\\n          <!-- error email  -->\\n          <ion-label *ngIf=\\\"form.get('email').hasError('email')\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> El email no tiene el formato correcto</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n      </ion-row>\\n\\n      <!-- Número de contacto 1 -->\\n      <ion-row>\\n        <ion-col size=\\\"5\\\">\\n          <ion-item class=\\\"ion-no-padding\\\">\\n            <ion-label position=\\\"floating\\\">\\n              <ion-icon src=\\\"/assets/icon/ic_phone.svg\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Código</ion-text>\\n            </ion-label>\\n            <ion-select (click)=\\\"loadFlags()\\\" formControlName=\\\"countryCode\\\" required placeholder=\\\"Código\\\"\\n              [cancelText]=\\\"'Cancelar'\\\" [okText]=\\\"'Aceptar'\\\">\\n              <ion-select-option *ngFor=\\\"let country of countryCodes\\\" value=\\\"+{{country.callingCodes[0]}}\\\">\\n                {{country.alpha2Code}} +{{country.callingCodes[0]}}</ion-select-option>\\n            </ion-select>\\n          </ion-item>\\n        </ion-col>\\n        <ion-col size=\\\"7\\\">\\n          <ion-item class=\\\"ion-no-padding\\\">\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon src=\\\"/assets/icon/ic_phone.svg\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Número de contacto</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"number\\\" pattern=\\\"\\\\d*\\\" formControlName=\\\"phone1\\\"></ion-input>\\n          </ion-item>\\n          <!-- error requerido  -->\\n          <ion-label *ngIf=\\\"form.get('phone1').hasError('required')\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> El Numero de contacto es requerido</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n      </ion-row>\\n\\n      <!-- Número de contacto 2 -->\\n      <!-- <ion-row>\\n        <ion-col size=\\\"12\\\">\\n          <ion-item class=\\\"ion-no-padding\\\">\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon name=\\\"call\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Número de contacto 2</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"string\\\" formControlName=\\\"phone2\\\"></ion-input>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row> -->\\n\\n\\n      <!-- title -->\\n      <div style=\\\"height: 30px;\\\"></div>\\n      <ion-row class=\\\"ion-margin-top\\\">\\n        <ion-col size=\\\"1\\\" offset=\\\"1\\\"></ion-col>\\n        <ion-col size=\\\"8\\\" class=\\\"ion-text-center\\\">\\n          <ion-text class=\\\"main-color ion-text-uppercase title\\\"><b>CAMBIAR CONTRASEÑA</b></ion-text>\\n        </ion-col>\\n        <ion-col size=\\\"1\\\"></ion-col>\\n      </ion-row>\\n\\n      <!-- Contraseña actual -->\\n      <ion-row>\\n        <ion-col size=\\\"12\\\">\\n          <ion-item class=\\\"ion-no-padding\\\">\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon src=\\\"/assets/icon/ic_lock.svg\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Contraseña actual</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"password\\\" formControlName=\\\"password\\\"></ion-input>\\n          </ion-item>\\n          <!-- http error  -->\\n          <ion-label *ngIf=\\\"httpError\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> {{ httpError }}</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n      </ion-row>\\n\\n      <!-- Nueva contraseña -->\\n      <ion-row>\\n        <ion-col size=\\\"12\\\">\\n          <ion-item class=\\\"ion-no-padding\\\">\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon src=\\\"/assets/icon/ic_lock.svg\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Nueva contraseña</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"password\\\" formControlName=\\\"newPassword\\\"></ion-input>\\n          </ion-item>\\n          <!-- password error  -->\\n          <ion-label *ngIf=\\\"passError\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> {{ passError }}</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n      </ion-row>\\n\\n      <!-- Repetir nueva contraseña -->\\n      <ion-row>\\n        <ion-col size=\\\"12\\\">\\n          <ion-item class=\\\"ion-no-padding\\\">\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon src=\\\"/assets/icon/ic_lock.svg\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Repetir nueva contraseña</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"password\\\" formControlName=\\\"confirmPassword\\\"></ion-input>\\n          </ion-item>\\n          <!-- password error  -->\\n          <ion-label *ngIf=\\\"passError\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> {{ passError }}</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n      </ion-row>\\n\\n      <!-- BTN -->\\n      <ion-row class=\\\"ion-margin-top ion-margin-bottom ion-align-items-center\\\" style=\\\"justify-content: center\\\">\\n        <ion-col size=\\\"10\\\">\\n          <ion-button expand=\\\"block\\\" class=\\\"ion-text-uppercase\\\" type=\\\"submit\\\" [disabled]=\\\"!form.valid\\\">\\n            GUARDAR CAMBIOS\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </form>\\n\\n\\n  </ion-grid>\\n</ion-content>\";","export default \".profileImg {\\n  height: 120px;\\n  width: 120px;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n\\n.imgCont {\\n  margin-top: 35px;\\n}\\n\\n.profileIcon {\\n  font-size: 16px;\\n  color: white;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n\\n.rate-cont {\\n  border-radius: 50px;\\n  height: 30px;\\n  width: 30px;\\n  background-color: #53657e;\\n  display: flex;\\n  align-items: center;\\n  text-align: center;\\n  margin-left: auto;\\n  margin-right: auto;\\n  margin-top: -22px;\\n}\\n\\nform {\\n  padding: 0 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2ZpbGUtcGFnZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFDRjs7QUFDQTtFQUNFLGdCQUFBO0FBRUY7O0FBQUE7RUFDRSxlQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFHRjs7QUFEQTtFQUNFLG1CQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7RUFDQSx5QkFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLGtCQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLGlCQUFBO0FBSUY7O0FBRkE7RUFDRSxlQUFBO0FBS0YiLCJmaWxlIjoicHJvZmlsZS1wYWdlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5wcm9maWxlSW1nIHtcbiAgaGVpZ2h0OiAxMjBweDtcbiAgd2lkdGg6IDEyMHB4O1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xufVxuLmltZ0NvbnQge1xuICBtYXJnaW4tdG9wOiAzNXB4O1xufVxuLnByb2ZpbGVJY29uIHtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBjb2xvcjogd2hpdGU7XG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICBtYXJnaW4tcmlnaHQ6IGF1dG87XG59XG4ucmF0ZS1jb250IHtcbiAgYm9yZGVyLXJhZGl1czogNTBweDtcbiAgaGVpZ2h0OiAzMHB4O1xuICB3aWR0aDogMzBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzUzNjU3ZTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICBtYXJnaW4tdG9wOiAtMjJweDtcbn1cbmZvcm0ge1xuICBwYWRkaW5nOiAwIDIwcHg7XG59XG4iXX0= */\";","import { HttpClient, HttpHeaders } from \"@angular/common/http\";\nimport {\n\tComponent,\n\tElementRef,\n\tEventEmitter,\n\tOnDestroy,\n\tOnInit,\n\tOutput,\n\tViewChild,\n} from \"@angular/core\";\nimport { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { Capacitor, Plugins } from \"@capacitor/core\";\nimport { Camera, CameraResultType, CameraSource } from \"@capacitor/camera\";\nimport { LoadingController, ModalController, Platform } from \"@ionic/angular\";\nimport { Subscription } from \"rxjs\";\n\nimport { User } from \"src/app/model/user.model\";\nimport { UserService } from \"src/app/services/user.service\";\nimport { API } from \"src/environments/environment\";\nimport { IMAGE_URL_BLANK, IMAGE_URL_BLANK_ } from \"src/shared/constants\";\nimport { SuccessModalComponent } from \"src/app/shared/success-modal/success-modal.component\";\nimport axios from \"axios\";\n\nfunction base64toBlob(base64Data, contentType) {\n\tcontentType = contentType || \"\";\n\tconst sliceSize = 1024;\n\tconst byteCharacters = atob(base64Data);\n\tconst bytesLength = byteCharacters.length;\n\tconst slicesCount = Math.ceil(bytesLength / sliceSize);\n\tconst byteArrays = new Array(slicesCount);\n\n\tfor (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n\t\tconst begin = sliceIndex * sliceSize;\n\t\tconst end = Math.min(begin + sliceSize, bytesLength);\n\n\t\tconst bytes = new Array(end - begin);\n\t\tfor (let offset = begin, i = 0; offset < end; ++i, ++offset) {\n\t\t\tbytes[i] = byteCharacters[offset].charCodeAt(0);\n\t\t}\n\t\tbyteArrays[sliceIndex] = new Uint8Array(bytes);\n\t}\n\treturn new Blob(byteArrays, { type: contentType });\n}\n\n@Component({\n\tselector: \"app-profile-page\",\n\ttemplateUrl: \"./profile-page.page.html\",\n\tstyleUrls: [\"./profile-page.page.scss\"],\n})\nexport class ProfilePagePage implements OnInit, OnDestroy {\n\tgrabbedUser: User;\n\theaders: HttpHeaders;\n\tuserSub: Subscription;\n\tform: FormGroup;\n\thttpError: string;\n\tpassError: string;\n\t@Output() imgPick = new EventEmitter<string | File>();\n\tselectedImage: string;\n\t@ViewChild(\"hiddenImgInput\") hiddenImgInputRef: ElementRef<HTMLInputElement>;\n\tuseInputPicker = false;\n\tcountryCodes = [];\n\n\tconstructor(\n\t\tprivate us: UserService,\n\t\tprivate lc: LoadingController,\n\t\tprivate http: HttpClient,\n\t\tprivate modalController: ModalController,\n\t\tprivate platform: Platform\n\t) {}\n\n\tngOnInit() {\n\t\tthis.getCountryCodes();\n\t\tthis.loadFlags = this.loadFlags.bind(this);\n\n\t\tthis.userSub = this.us.loggedUser.subscribe((user) => {\n\t\t\tthis.grabbedUser = user;\n\t\t\t//api headers\n\t\t\tthis.headers = new HttpHeaders().set(\n\t\t\t\t\"Authorization\",\n\t\t\t\t\"Bearer \" + this.grabbedUser.access_token\n\t\t\t);\n\t\t});\n\n\t\tlet phone1: string;\n\t\tlet phone2: string;\n\t\tlet countryCode: string;\n\n\t\tif (this.grabbedUser.phone1 === \"-\") {\n\t\t\tphone1 = null;\n\t\t} else {\n\t\t\tlet splitedPhone = this.grabbedUser.phone1.split(\" \");\n\t\t\tconsole.log(splitedPhone);\n\t\t\tconsole.log(splitedPhone.length);\n\t\t\tif (splitedPhone.length <= 1) {\n\t\t\t\tphone1 = splitedPhone[0];\n\t\t\t} else {\n\t\t\t\tcountryCode = splitedPhone[0];\n\t\t\t\tphone1 = splitedPhone[1];\n\t\t\t}\n\t\t}\n\t\tif (this.grabbedUser.phone2 === \"-\") {\n\t\t\tphone2 = null;\n\t\t} else {\n\t\t\tphone2 = this.grabbedUser.phone2;\n\t\t}\n\t\tthis.form = new FormGroup({\n\t\t\tname: new FormControl(\n\t\t\t\tthis.grabbedUser.name + \" \" + this.grabbedUser.last_name,\n\t\t\t\t{\n\t\t\t\t\tupdateOn: \"blur\",\n\t\t\t\t\tvalidators: [Validators.required],\n\t\t\t\t}\n\t\t\t),\n\t\t\temail: new FormControl(this.grabbedUser.email, {\n\t\t\t\tupdateOn: \"blur\",\n\t\t\t\tvalidators: [Validators.required, Validators.email],\n\t\t\t}),\n\t\t\tcountryCode: new FormControl(countryCode, {\n\t\t\t\tupdateOn: \"blur\",\n\t\t\t\tvalidators: [Validators.required],\n\t\t\t}),\n\t\t\tphone1: new FormControl(phone1, {\n\t\t\t\tupdateOn: \"blur\",\n\t\t\t\tvalidators: [Validators.required],\n\t\t\t}),\n\t\t\tphone2: new FormControl(phone2, {\n\t\t\t\tupdateOn: \"blur\",\n\t\t\t}),\n\t\t\tpassword: new FormControl(null, {\n\t\t\t\tupdateOn: \"blur\",\n\t\t\t}),\n\t\t\tnewPassword: new FormControl(null, {\n\t\t\t\tupdateOn: \"blur\",\n\t\t\t}),\n\t\t\tconfirmPassword: new FormControl(null, {\n\t\t\t\tupdateOn: \"blur\",\n\t\t\t}),\n\t\t});\n\t\t// platfrom check\n\t\tif (\n\t\t\t(this.platform.is(\"mobile\") && !this.platform.is(\"hybrid\")) ||\n\t\t\tthis.platform.is(\"desktop\")\n\t\t) {\n\t\t\tthis.useInputPicker = true;\n\t\t}\n\t}\n\n\tonUpdateUser() {\n\t\tthis.httpError = null;\n\t\tthis.passError = null;\n\t\tlet name = this.form.value.name.split(\" \");\n\t\tlet lname = name[1];\n\t\tif (name.length > 2) {\n\t\t\tlname += \" \" + name[2];\n\t\t}\n\n\t\tconst modUser = {\n\t\t\tname: name[0],\n\t\t\tlast_name: lname,\n\t\t\temail: this.form.value.email,\n\t\t\tpassword: this.form.value.newPassword,\n\t\t\tcurrent_password: this.form.value.password,\n\t\t\tphone1: `${this.form.value.countryCode} ${this.form.value.phone1}`,\n\t\t\tphone2: this.form.value.phone2,\n\t\t};\n\t\tif (this.form.value.password === null) {\n\t\t\tdelete modUser.password;\n\t\t\tdelete modUser.current_password;\n\t\t} else {\n\t\t\tif (this.form.value.newPassword !== this.form.value.confirmPassword) {\n\t\t\t\tthis.passError = \"Las contraseñas no concuerdan\";\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.lc\n\t\t\t.create({\n\t\t\t\tmessage: \"Alcualizando la informacion...\",\n\t\t\t})\n\t\t\t.then((loadingEl) => {\n\t\t\t\tloadingEl.present();\n\t\t\t\tlet headers = new HttpHeaders().set(\n\t\t\t\t\t\"Authorization\",\n\t\t\t\t\t\"Bearer \" + this.grabbedUser.access_token\n\t\t\t\t);\n\t\t\t\tthis.http\n\t\t\t\t\t.put(API + \"/account\", modUser, { headers: headers })\n\t\t\t\t\t.subscribe(\n\t\t\t\t\t\t(resData) => {\n\t\t\t\t\t\t\tloadingEl.dismiss();\n\n\t\t\t\t\t\t\tif (resData[\"code\"] === 200) {\n\t\t\t\t\t\t\t\t//update user controler\n\t\t\t\t\t\t\t\tthis.us.setUser(\n\t\t\t\t\t\t\t\t\tnew User(\n\t\t\t\t\t\t\t\t\t\tthis.grabbedUser.id,\n\t\t\t\t\t\t\t\t\t\tresData[\"data\"].name,\n\t\t\t\t\t\t\t\t\t\tresData[\"data\"].last_name,\n\t\t\t\t\t\t\t\t\t\tresData[\"data\"].img_profile,\n\t\t\t\t\t\t\t\t\t\tresData[\"data\"].email,\n\t\t\t\t\t\t\t\t\t\tresData[\"data\"].phone1,\n\t\t\t\t\t\t\t\t\t\tresData[\"data\"].phone2,\n\t\t\t\t\t\t\t\t\t\tthis.grabbedUser.role,\n\t\t\t\t\t\t\t\t\t\tthis.grabbedUser.access_token\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t//resets values after succefull update\n\t\t\t\t\t\t\t\tthis.form.setValue({\n\t\t\t\t\t\t\t\t\tname: this.form.value.name,\n\t\t\t\t\t\t\t\t\temail: this.form.value.email,\n\t\t\t\t\t\t\t\t\tphone1: this.form.value.phone1,\n\t\t\t\t\t\t\t\t\tphone2: this.form.value.phone2,\n\t\t\t\t\t\t\t\t\tpassword: null,\n\t\t\t\t\t\t\t\t\tnewPassword: null,\n\t\t\t\t\t\t\t\t\tconfirmPassword: null,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthis.modalController\n\t\t\t\t\t\t\t\t\t.create({\n\t\t\t\t\t\t\t\t\t\tcomponent: SuccessModalComponent,\n\t\t\t\t\t\t\t\t\t\tcomponentProps: {\n\t\t\t\t\t\t\t\t\t\t\tmessage: \"INFORMACIÓN ACTUALIZADA\",\n\t\t\t\t\t\t\t\t\t\t\tredirect: false,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tcssClass: \"modalSuccess\",\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.then((modalEl) => {\n\t\t\t\t\t\t\t\t\t\tmodalEl.present();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(e) => {\n\t\t\t\t\t\t\tloadingEl.dismiss();\n\t\t\t\t\t\t\tthis.httpError = e[\"error\"].message;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t});\n\t}\n\n\tonLoadImg() {\n\t\tif (!Capacitor.isPluginAvailable(\"Camera\") || this.useInputPicker) {\n\t\t\tthis.hiddenImgInputRef.nativeElement.click();\n\t\t\treturn;\n\t\t}\n\t\tCamera.getPhoto({\n\t\t\tquality: 100,\n\t\t\tsource: CameraSource.Prompt,\n\t\t\tcorrectOrientation: true,\n\t\t\theight: 450,\n\t\t\t// width: 200,\n\t\t\tresultType: CameraResultType.DataUrl,\n\t\t\tpromptLabelPhoto: \"Fotos\",\n\t\t\tpromptLabelPicture: \"Cámara\",\n\t\t\tpromptLabelCancel: \"Cancelar\",\n\t\t})\n\t\t\t.then((image) => {\n\t\t\t\tthis.saveImgToApi(image.dataUrl);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tconsole.log(e);\n\t\t\t});\n\t}\n\n\tonLoadImgFromInput(e: Event) {\n\t\tconst loadedFile = (e.target as HTMLInputElement).files[0];\n\t\tthis.saveImgToApi(loadedFile);\n\t\t//save img to api\n\t}\n\n\tasync getCountryCodes() {\n\t\ttry {\n\t\t\tlet response = await axios.get(\n\t\t\t\t\"https://restcountries.eu/rest/v2/region/Americas\"\n\t\t\t);\n\t\t\tthis.countryCodes = response.data;\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t}\n\n\tsaveImgToApi(imageData: string | File) {\n\t\tlet imgFile;\n\t\tif (typeof imageData === \"string\") {\n\t\t\ttry {\n\t\t\t\timgFile = base64toBlob(\n\t\t\t\t\timageData.replace(\"data:image/jpeg;base64,\", \"\"),\n\t\t\t\t\t\"image/jpeg\"\n\t\t\t\t);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\timgFile = imageData;\n\t\t}\n\t\tthis.form.patchValue({ image: imgFile });\n\t\tconst formData = new FormData();\n\t\tformData.append(\"image\", imgFile);\n\n\t\tthis.http\n\t\t\t.post(API + \"/account/image\", formData, { headers: this.headers })\n\t\t\t.subscribe(\n\t\t\t\t(resData) => {\n\t\t\t\t\tthis.us.dbUserGrab(\n\t\t\t\t\t\tthis.grabbedUser.access_token,\n\t\t\t\t\t\tthis.grabbedUser.role\n\t\t\t\t\t);\n\t\t\t\t\tthis.modalController\n\t\t\t\t\t\t.create({\n\t\t\t\t\t\t\tcomponent: SuccessModalComponent,\n\t\t\t\t\t\t\tcomponentProps: {\n\t\t\t\t\t\t\t\tmessage: \"INFORMACIÓN ACTUALIZADA\",\n\t\t\t\t\t\t\t\tredirect: false,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcssClass: \"modalSuccess\",\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then((modalEl) => {\n\t\t\t\t\t\t\tmodalEl.present();\n\t\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t(err) => {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\tngOnDestroy() {\n\t\tthis.userSub.unsubscribe();\n\t}\n\n\tgetProfilePicture() {\n\t\tconsole.log(this.grabbedUser);\n\t\tif (\n\t\t\tthis.grabbedUser.img_profile &&\n\t\t\tthis.grabbedUser.img_profile !== IMAGE_URL_BLANK &&\n\t\t\tthis.grabbedUser.img_profile !== \"/\"\n\t\t) {\n\t\t\treturn this.grabbedUser.img_profile;\n\t\t}\n\t\treturn \"assets/images/avatar.png\";\n\t}\n\n\tdbUserGrab(token: string, role: string) {\n\t\tlet headers = new HttpHeaders().set(\"Authorization\", \"Bearer \" + token);\n\t\tthis.http\n\t\t\t.get(API + \"/account/me\", { headers: headers })\n\t\t\t.subscribe((resData) => {\n\t\t\t\tlet img: string;\n\t\t\t\tif (resData[\"data\"].img_profile === null) {\n\t\t\t\t\timg = null;\n\t\t\t\t} else {\n\t\t\t\t\timg = resData[\"data\"].img_profile;\n\t\t\t\t}\n\t\t\t\tthis.grabbedUser = resData[\"data\"];\n\t\t\t});\n\t}\n\n\tloadFlags() {\n\t\tsetTimeout(() => {\n\t\t\tlet radios = document.getElementsByClassName(\n\t\t\t\t\"alert-radio-label sc-ion-alert-md\"\n\t\t\t);\n\t\t\tfor (let index = 0; index < radios.length; index++) {\n\t\t\t\tlet element = radios[index];\n\t\t\t\telement.innerHTML = `<img class=\"country-image\" style=\"width: 30px;height:16px;\" src=\"${this.countryCodes[index].flag}\" /> ${element.innerHTML}`;\n\t\t\t}\n\t\t}, 100);\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProfilePagePageRoutingModule } from './profile-page-routing.module';\n\nimport { ProfilePagePage } from './profile-page.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    // FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    ProfilePagePageRoutingModule\n  ],\n  declarations: [ProfilePagePage]\n})\nexport class ProfilePagePageModule {}\n"]}