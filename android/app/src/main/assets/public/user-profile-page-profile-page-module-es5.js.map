{"version":3,"sources":["webpack:///src/app/user/profile-page/profile-page-routing.module.ts","webpack:///src/app/user/profile-page/profile-page.page.html","webpack:///src/app/user/profile-page/profile-page.page.scss","webpack:///src/app/user/profile-page/profile-page.page.ts","webpack:///src/app/user/profile-page/profile-page.module.ts"],"names":["routes","path","component","ProfilePagePageRoutingModule","imports","forChild","exports","ProfilePagePage","us","lc","http","modalController","userSub","loggedUser","subscribe","user","grabbedUser","dbUserGrab","access_token","role","phone1","phone2","form","name","last_name","updateOn","validators","required","email","password","newPassword","confirmPassword","value","split","lname","length","modUser","current_password","create","message","then","loadingEl","present","headers","set","put","resData","dismiss","img","img_profile","setUser","id","cssClass","modalEl","unsubscribe","selector","template","ProfilePagePageModule","declarations"],"mappings":"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","file":"user-profile-page-profile-page-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ProfilePagePage } from './profile-page.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePagePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProfilePagePageRoutingModule {}\n","export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/user/home\\\" text=\\\"\\\" icon=\\\"arrow-back\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title class=\\\"title-toolbar\\\">EDITAR USUARIO</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid>\\n\\n    <!-- profile Img -->\\n    <ion-row class=\\\"imgCont\\\">\\n      <ion-col>\\n        <ion-avatar class=\\\"ion-margin-start profileImg\\\">\\n          <ion-img src=\\\"{{ grabbedUser.img_profile }}\\\"></ion-img>\\n        </ion-avatar>\\n      </ion-col>\\n    </ion-row>\\n    <!-- edit icon -->\\n    <ion-row>\\n      <ion-col>\\n        <div class=\\\"rate-cont\\\" (click)=\\\"imgProfile()\\\">\\n          <ion-icon name=\\\"pencil\\\" class=\\\"profileIcon\\\"></ion-icon>\\n        </div>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- Register Inputs -->\\n    <form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onUpdateUser()\\\">\\n      <!-- nombre -->\\n      <ion-row>\\n        <ion-col size=\\\"11\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon name=\\\"person\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Nombre</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"text\\\" formControlName=\\\"name\\\"></ion-input>\\n          </ion-item>\\n          <!-- error  -->\\n          <ion-label *ngIf=\\\"form.get('name').hasError('required')\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> El nombre es requerido</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n      </ion-row>\\n\\n      <!-- email -->\\n      <ion-row>\\n        <ion-col size=\\\"11\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">\\n              <ion-icon name=\\\"mail\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Email</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"text\\\" formControlName=\\\"email\\\"></ion-input>\\n          </ion-item>\\n          <!-- error requerido  -->\\n          <ion-label *ngIf=\\\"form.get('email').hasError('required')\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> El email es requerido</small>\\n            </ion-text>\\n          </ion-label>\\n          <!-- error email  -->\\n          <ion-label *ngIf=\\\"form.get('email').hasError('email')\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> El email no tiene el formato correcto</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n      </ion-row>\\n\\n      <!-- Número de contacto 1 -->\\n      <ion-row>\\n        <ion-col size=\\\"11\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon name=\\\"call\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Número de contacto 1</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"string\\\" formControlName=\\\"phone1\\\"></ion-input>\\n          </ion-item>\\n          <!-- error requerido  -->\\n          <ion-label *ngIf=\\\"form.get('phone1').hasError('required')\\\" class=\\\"errorMess\\\">\\n            <ion-icon name=\\\"alert-circle-outline\\\" class=\\\"iconFixG\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text color=\\\"danger\\\">\\n              <small> El Numero de contacto es requerido</small>\\n            </ion-text>\\n          </ion-label>\\n        </ion-col>\\n      </ion-row>\\n\\n      <!-- Número de contacto 2 -->\\n      <ion-row>\\n        <ion-col size=\\\"11\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon name=\\\"call\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Número de contacto 2</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"string\\\" formControlName=\\\"phone2\\\"></ion-input>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n\\n\\n      <!-- title -->\\n      <div style=\\\"height: 30px;\\\"></div>\\n      <ion-row class=\\\"ion-margin-top\\\">\\n        <ion-col size=\\\"1\\\" offset=\\\"1\\\"></ion-col>\\n        <ion-col size=\\\"8\\\" class=\\\"ion-text-center\\\">\\n          <ion-text class=\\\"main-color ion-text-uppercase title\\\"><b>CAMBIAR CONTRASEÑA</b></ion-text>\\n        </ion-col>\\n        <ion-col size=\\\"1\\\"></ion-col>\\n      </ion-row>\\n\\n      <!-- Contraseña actual -->\\n      <ion-row>\\n        <ion-col size=\\\"11\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon name=\\\"lock-closed\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Contraseña actual</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"password\\\" formControlName=\\\"password\\\"></ion-input>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n\\n      <!-- Nueva contraseña -->\\n      <ion-row>\\n        <ion-col size=\\\"11\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon name=\\\"lock-closed\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Nueva contraseña</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"password\\\" formControlName=\\\"newPassword\\\"></ion-input>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n\\n      <!-- Repetir nueva contraseña -->\\n      <ion-row>\\n        <ion-col size=\\\"11\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\" class=\\\"main-color\\\">\\n              <ion-icon name=\\\"lock-closed\\\" slot=\\\"start\\\" class=\\\"main-color\\\"></ion-icon>\\n              <ion-text class=\\\"main-color\\\">&nbsp;&nbsp;&nbsp;Repetir nueva contraseña</ion-text>\\n            </ion-label>\\n            <ion-input type=\\\"password\\\" formControlName=\\\"confirmPassword\\\"></ion-input>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n\\n      <!-- BTN -->\\n      <ion-row class=\\\"ion-margin-top ion-margin-bottom\\\">\\n        <ion-col offset=\\\"1\\\">\\n          <ion-button size=\\\"5\\\" expand=\\\"block\\\" class=\\\"ion-text-uppercase\\\" type=\\\"submit\\\" [disabled]=\\\"!form.valid\\\">\\n            GUARDAR CAMBIOS\\n          </ion-button>\\n        </ion-col>\\n        <ion-col size=\\\"2\\\"></ion-col>\\n      </ion-row>\\n    </form>\\n\\n\\n  </ion-grid>\\n</ion-content>\\n\";","export default \".profileImg {\\n  height: 120px;\\n  width: 120px;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n\\n.imgCont {\\n  margin-top: 35px;\\n}\\n\\n.profileIcon {\\n  font-size: 16px;\\n  color: white;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n\\n.rate-cont {\\n  border-radius: 50px;\\n  height: 30px;\\n  width: 30px;\\n  background-color: #53657e;\\n  display: flex;\\n  align-items: center;\\n  text-align: center;\\n  margin-left: auto;\\n  margin-right: auto;\\n  margin-top: -22px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2ZpbGUtcGFnZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxhQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFDSjs7QUFDRTtFQUNFLGdCQUFBO0FBRUo7O0FBQUU7RUFDRSxlQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFHSjs7QUFERTtFQUNFLG1CQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7RUFDQSx5QkFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLGtCQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLGlCQUFBO0FBSUoiLCJmaWxlIjoicHJvZmlsZS1wYWdlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5wcm9maWxlSW1ne1xuICAgIGhlaWdodDogMTIwcHg7XG4gICAgd2lkdGg6IDEyMHB4O1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgfVxuICAuaW1nQ29udHtcbiAgICBtYXJnaW4tdG9wOiAzNXB4O1xuICB9XG4gIC5wcm9maWxlSWNvbntcbiAgICBmb250LXNpemU6IDE2cHg7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgfVxuICAucmF0ZS1jb250e1xuICAgIGJvcmRlci1yYWRpdXM6IDUwcHg7XG4gICAgaGVpZ2h0OiAzMHB4O1xuICAgIHdpZHRoOiAzMHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICM1MzY1N2U7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gICAgbWFyZ2luLXRvcDogLTIycHg7XG4gIH1cbiAgIl19 */\";","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { LoadingController, ModalController } from '@ionic/angular';\nimport { Subscription } from 'rxjs';\n\nimport { User } from 'src/app/model/user.model';\nimport { UserService } from 'src/app/services/user.service';\nimport { SuccessModalComponent } from './success-modal/success-modal.component';\n\n@Component({\n  selector: 'app-profile-page',\n  templateUrl: './profile-page.page.html',\n  styleUrls: ['./profile-page.page.scss'],\n})\nexport class ProfilePagePage implements OnInit, OnDestroy {\n  grabbedUser: User;\n  userSub: Subscription;\n  form: FormGroup;\n\n  constructor(\n    private us: UserService,\n    private lc: LoadingController,\n    private http: HttpClient,\n    private modalController: ModalController,\n  ) { }\n\n  ngOnInit() {\n    this.userSub = this.us.loggedUser.subscribe(user => {\n      this.grabbedUser = user;\n    });\n    // updates to the most current info from DB\n    this.us.dbUserGrab(this.grabbedUser.access_token, this.grabbedUser.role);\n    let phone1: string;\n    let phone2: string;\n    if (this.grabbedUser.phone1 === '-') {\n      phone1 = null;\n    } else {\n      phone1 = this.grabbedUser.phone1;\n    }\n    if (this.grabbedUser.phone2 === '-') {\n      phone2 = null;\n    } else {\n      phone2 = this.grabbedUser.phone2;\n    }\n    this.form = new FormGroup({\n      name: new FormControl(this.grabbedUser.name+' '+this.grabbedUser.last_name, {\n        updateOn: 'blur',\n        validators: [Validators.required]\n      }),\n      email: new FormControl(this.grabbedUser.email, {\n        updateOn: 'blur',\n        validators: [Validators.required, Validators.email]\n      }),\n      phone1: new FormControl(phone1, {\n        updateOn: 'blur',\n        validators: [Validators.required]\n      }),\n      phone2: new FormControl(phone2, {\n        updateOn: 'blur',\n      }),\n      password: new FormControl(null, {\n        updateOn: 'blur',\n      }),\n      newPassword: new FormControl(null, {\n        updateOn: 'blur',\n      }),\n      confirmPassword: new FormControl(null, {\n        updateOn: 'blur',\n      }),\n    });\n    // console.log(this.grabbedUser, this.form);\n  }\n\n  onUpdateUser(){\n    // console.log(this.form);\n    let name = this.form.value.name.split(\" \");\n    let lname = name[1];\n    if (name.length > 2) {\n      lname += ' '+name[2];\n    }\n    // console.log(name[0], lname);\n    const modUser = {\n      name: name[0],\n      last_name: lname,\n      email: this.form.value.email,\n      password: this.form.value.newPassword,\n      current_password: this.form.value.password,\n      phone1: this.form.value.phone1,\n      phone2: this.form.value.phone2\n    }\n    if (this.form.value.password === null) {\n      delete modUser.password;\n      delete modUser.current_password;\n    }\n    // console.log(this.form, this.form.errors.name);\n    this.lc.create({\n      message: 'Alcualizando la informacion...'\n    }).then(loadingEl => {\n      loadingEl.present();\n      let headers = new HttpHeaders().set('Authorization', 'Bearer '+this.grabbedUser.access_token);\n      this.http.put('http://workintest.herokuapp.com/api/account', modUser, {headers: headers})\n      .subscribe(resData => {\n        loadingEl.dismiss();\n        // console.log(resData);\n        if (resData['code'] === 200) {\n          let img: string;\n          if (resData['data'].img_profile === null) {\n            img = 'assets/images/avatar.png';\n          }else{\n            img = resData['data'].user.img_profile;\n          }\n          //update user controler\n          this.us.setUser(new User(\n            this.grabbedUser.id,\n            resData['data'].name,\n            resData['data'].last_name,\n            img,\n            resData['data'].email,\n            resData['data'].phone1,\n            resData['data'].phone2,\n            this.grabbedUser.role,\n            this.grabbedUser.access_token,\n            ));\n          this.modalController.create({\n            component: SuccessModalComponent,\n            cssClass: 'modalSuccess',\n          }).then(modalEl => {\n            modalEl.present();\n          });\n        } else {\n          return false\n        }\n      });\n\n    });\n  }\n\n  imgProfile(){\n    // do something awseome\n  }\n\n  ngOnDestroy(){\n    this.userSub.unsubscribe();\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProfilePagePageRoutingModule } from './profile-page-routing.module';\n\nimport { ProfilePagePage } from './profile-page.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    // FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    ProfilePagePageRoutingModule\n  ],\n  declarations: [ProfilePagePage]\n})\nexport class ProfilePagePageModule {}\n"]}