{"version":3,"sources":["webpack:///src/app/user/servicio-pagar/servicio-pagar-routing.module.ts","webpack:///src/app/user/servicio-pagar/servicio-pagar.module.ts","webpack:///src/app/user/servicio-pagar/servicio-pagar.page.ts","webpack:///src/app/user/servicio-pagar/servicio-pagar.page.scss","webpack:///src/app/user/servicio-pagar/servicio-pagar.page.html"],"names":["routes","path","component","ServicioPagarPageRoutingModule","imports","forChild","exports","ServicioPagarPageModule","declarations","ServicioPagarPage","modalController","router","menuController","http","us","lc","solServ","route","loadedService","amount_client","categoryName","cummunename","category_id","created_date","date_required","descProf","description","hours_professional","hours_requestservice","img_profile","professional_profiles_id","request_id","status_id","status_name","status_order","supplierLastName","supplierName","supplier_id","ticket_number","user_client_id","work_days","request_cost","selectedButton","paymentTypes","isFinished","showRateProfessional","userSub","loggedUser","subscribe","user","grabbedUser","headers","set","access_token","serviceId","solicitud","solicitudID","loadPaymentTypes","queryParamMap","params","queryParams","finished","enable","a","get","Authorization","response","data","console","log","loadService","create","message","then","loadingEl","present","resData","dismiss","setServiceObj","worDate","split","wDate","length","firstCost","paymentType","find","id","payment_type_id","loadCosts","validateIfRatingYet","err","loader","code","alert","servicesCosts","total","reduce","cost","costs_type_id","Number","Math","floor","getServiceAditional","getServiceCost","open","body","amount","post","setPaymentId","payment_id","openKhipu","type","navigate","unsubscribe","paymentId","startByPaymentId","success","createPayment","request_service_id","grossamount","getTotal","componentProps","secondMessage","redirect","redirectUrl","cssClass","modalEl","evaluate","selector","template"],"mappings":"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","file":"user-servicio-pagar-servicio-pagar-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ServicioPagarPage } from './servicio-pagar.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ServicioPagarPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ServicioPagarPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ServicioPagarPageRoutingModule } from './servicio-pagar-routing.module';\n\nimport { ServicioPagarPage } from './servicio-pagar.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ServicioPagarPageRoutingModule\n  ],\n  declarations: [ServicioPagarPage]\n})\nexport class ServicioPagarPageModule {}\n","import { HttpClient, HttpHeaders } from \"@angular/common/http\";\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport {\n\tLoadingController,\n\tMenuController,\n\tModalController,\n} from \"@ionic/angular\";\nimport axios from \"axios\";\nimport { Subscription } from \"rxjs\";\nimport { User } from \"src/app/model/user.model\";\nimport { SolicitudService } from \"src/app/services/solicitud.service\";\nimport { UserService } from \"src/app/services/user.service\";\nimport { API } from \"src/environments/environment\";\nimport { PaymentMethodType } from \"../solicitud-detail/solicitud-detail.page\";\nimport { SuccessModalComponent } from \"src/app/shared/success-modal/success-modal.component\";\nimport khenshin from \"cordova-khenshin/www/khenshin\";\n\n@Component({\n\tselector: \"app-servicio-pagar\",\n\ttemplateUrl: \"./servicio-pagar.page.html\",\n\tstyleUrls: [\"./servicio-pagar.page.scss\"],\n})\nexport class ServicioPagarPage implements OnInit, OnDestroy {\n\tgrabbedUser: User;\n\tuserSub: Subscription;\n\theaders: HttpHeaders;\n\tloadedService = {\n\t\tamount_client: null,\n\t\tcategoryName: null,\n\t\tcummunename: null,\n\t\tcategory_id: null,\n\t\tcreated_date: null,\n\t\tdate_required: null,\n\t\tdescProf: null,\n\t\tdescription: null,\n\t\thours_professional: null,\n\t\thours_requestservice: null,\n\t\timg_profile: null,\n\t\tprofessional_profiles_id: null,\n\t\trequest_id: null,\n\t\tstatus_id: null,\n\t\tstatus_name: null,\n\t\tstatus_order: null,\n\t\tsupplierLastName: null,\n\t\tsupplierName: null,\n\t\tsupplier_id: null,\n\t\tticket_number: null,\n\t\tuser_client_id: null,\n\t\twork_days: null,\n\t\trequest_cost: [],\n\t};\n\tserviceId: string;\n\twDate;\n\tservicesCosts;\n\tselectedButton: PaymentMethodType = \"cash\";\n\tpaymentTypes = [];\n\tisFinished = false;\n\tshowRateProfessional = false;\n\n\tconstructor(\n\t\tprivate modalController: ModalController,\n\t\tprivate router: Router,\n\t\tprivate menuController: MenuController,\n\t\tprivate http: HttpClient,\n\t\tprivate us: UserService,\n\t\tprivate lc: LoadingController,\n\t\tprivate solServ: SolicitudService,\n\t\tprivate route: ActivatedRoute\n\t) {}\n\n\tngOnInit() {\n\t\tthis.userSub = this.us.loggedUser.subscribe((user) => {\n\t\t\tthis.grabbedUser = user;\n\t\t\tthis.headers = new HttpHeaders().set(\n\t\t\t\t\"Authorization\",\n\t\t\t\t\"Bearer \" + this.grabbedUser.access_token\n\t\t\t);\n\t\t\tthis.serviceId = this.solServ.solicitud.solicitudID;\n\t\t\tthis.loadPaymentTypes();\n\t\t});\n\n\t\tthis.route.queryParamMap.subscribe((params: any) => {\n\t\t\tlet queryParams = { ...params };\n\t\t\tthis.isFinished = queryParams.params?.finished === \"true\";\n\t\t});\n\t}\n\n\tionViewWillEnter() {\n\t\tthis.menuController.enable(true, \"user\");\n\t}\n\n\tasync loadPaymentTypes() {\n\t\ttry {\n\t\t\tlet response = await axios.get(`${API}/payments/type`, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${this.grabbedUser.access_token}`,\n\t\t\t\t},\n\t\t\t});\n\t\t\tthis.paymentTypes = response.data.data;\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t} finally {\n\t\t\tthis.loadService();\n\t\t}\n\t}\n\n\tloadService() {\n\t\tthis.lc\n\t\t\t.create({\n\t\t\t\tmessage: \"Cargando informacion del servicio...\",\n\t\t\t})\n\t\t\t.then((loadingEl) => {\n\t\t\t\tloadingEl.present();\n\t\t\t\tthis.http\n\t\t\t\t\t.get(API + `/client/requestservice/${this.serviceId}`, {\n\t\t\t\t\t\theaders: this.headers,\n\t\t\t\t\t})\n\t\t\t\t\t.subscribe(\n\t\t\t\t\t\t(resData) => {\n\t\t\t\t\t\t\tloadingEl.dismiss();\n\t\t\t\t\t\t\tthis.loadedService = resData[\"data\"];\n\t\t\t\t\t\t\tthis.solServ.setServiceObj(resData[\"data\"]);\n\t\t\t\t\t\t\tlet worDate = this.loadedService.created_date.split(\" \");\n\t\t\t\t\t\t\tthis.wDate = worDate[0];\n\n\t\t\t\t\t\t\tif (this.loadedService.request_cost.length > 0) {\n\t\t\t\t\t\t\t\tlet firstCost = this.loadedService.request_cost[0];\n\t\t\t\t\t\t\t\tlet paymentType = this.paymentTypes.find(\n\t\t\t\t\t\t\t\t\t(paymentType) => paymentType.id === firstCost.payment_type_id\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t\tif (paymentType.name === \"Efectivo\") {\n\t\t\t\t\t\t\t\t\tthis.selectedButton = \"cash\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.selectedButton = \"credit\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.loadCosts();\n\t\t\t\t\t\t\tthis.validateIfRatingYet();\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(err) => {\n\t\t\t\t\t\t\tloadingEl.dismiss();\n\t\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t});\n\t}\n\n\tasync loadCosts() {\n\t\tlet loader = await this.lc.create({\n\t\t\tmessage: \"Consultando información...\",\n\t\t});\n\t\tloader.present();\n\t\ttry {\n\t\t\tlet response = await axios.get(\n\t\t\t\t`${API}/client/detailcostrequest/${this.serviceId}`,\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Bearer ${this.grabbedUser.access_token}`,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tif (response.data) {\n\t\t\t\tlet data = response.data.data;\n\t\t\t\tif (response.data.code !== 200) {\n\t\t\t\t\talert(\"Error\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.servicesCosts = data;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t} finally {\n\t\t\tloader.dismiss();\n\t\t}\n\t}\n\n\tgetServiceCost() {\n\t\tlet total: number = this.loadedService.request_cost.reduce(\n\t\t\t(total, cost) => total + (cost.costs_type_id === 1 ? Number(cost.amount_client) : 0),\n\t\t\t0\n\t\t);\n\t\treturn Math.floor(total);\n\t}\n\n\tgetServiceAditional() {\n\t\tlet total: number = this.loadedService.request_cost.reduce(\n\t\t\t(total, cost) => total + (cost.costs_type_id === 2 ? Number(cost.amount_client) : 0),\n\t\t\t0\n\t\t);\n\t\treturn Math.floor(total);\n\t}\n\n\tgetTotal() {\n\t\treturn Math.floor(\n\t\t\tNumber(this.getServiceAditional()) +\n\t\t\tNumber(this.getServiceCost())\n\t\t);\n\t}\n\n\topenMenu() {\n\t\tthis.menuController.open();\n\t}\n\n\tasync paymentForm() {\n\t\t//this.router.navigate([\"/user/servicio-pagar-forma\"]);\n\n\t\ttry {\n\t\t\tlet body = {\n\t\t\t\t//amount: this.getTotal(),\n\t\t\t\tamount: 1,\n\t\t\t};\n\t\t\tlet { data } = await axios.post(`${API}/client/payment-id`, body, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${this.grabbedUser.access_token}`,\n\t\t\t\t},\n\t\t\t});\n\t\t\tthis.solServ.setPaymentId(data.data.payment_id);\n\t\t\tthis.openKhipu(data.data.payment_id);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t}\n\n\tsetSelectedButton(type: PaymentMethodType) {\n\t\tthis.selectedButton = type;\n\t}\n\n\tgoToReport() {\n\t\tthis.router.navigate([\"/user/service-report\"]);\n\t}\n\n\tngOnDestroy() {\n\t\tthis.userSub.unsubscribe();\n\t}\n\n\topenKhipu(paymentId: string) {\n\t\tkhenshin.startByPaymentId(\n\t\t\tpaymentId,\n\t\t\t(success) => {\n\t\t\t\tconsole.log(success);\n\t\t\t\tthis.createPayment();\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t\talert(\"Error con el pago\");\n\t\t\t}\n\t\t);\n\t}\n\n\tgoToRateProfessional() {\n\t\tthis.router.navigate([\"/user/seval-prof\"]);\n\t}\n\n\tasync createPayment() {\n\t\ttry {\n\t\t\tlet loader = await this.lc.create({ message: \"Cargando ID de pago....\" });\n\t\t\tloader.present();\n\t\t\tlet body = {\n\t\t\t\trequest_service_id: this.solServ.solicitud.solicitudID,\n\t\t\t\tpayment_type_id: 1,\n\t\t\t\tgrossamount: this.getTotal(),\n\t\t\t};\n\t\t\tawait axios.post(`${API}/client/payment`, body, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${this.grabbedUser.access_token}`,\n\t\t\t\t},\n\t\t\t});\n\t\t\tawait loader.dismiss();\n\t\t\tthis.modalController\n\t\t\t\t.create({\n\t\t\t\t\tcomponent: SuccessModalComponent,\n\t\t\t\t\tcomponentProps: {\n\t\t\t\t\t\tmessage: \"¡EL PAGO HA SIDO EXISTOSO!\",\n\t\t\t\t\t\tsecondMessage: \"Recuerda evaluar el servicio.\",\n\t\t\t\t\t\tredirect: true,\n\t\t\t\t\t\tredirectUrl: \"/user/seval-prof\",\n\t\t\t\t\t},\n\t\t\t\t\tcssClass: \"modalSuccess\",\n\t\t\t\t})\n\t\t\t\t.then((modalEl) => {\n\t\t\t\t\tmodalEl.present();\n\t\t\t\t});\n\t\t} catch (error) {\n\t\t\talert(\"Error al registrar el pago\");\n\t\t}\n\t}\n\n\tasync validateIfRatingYet() {\n\t\ttry {\n\t\t\tlet response = await axios.get(\n\t\t\t\t`${API}/supplier/evaluation/done/${this.solServ.solicitud.solicitudID}`,\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Bearer ${this.grabbedUser.access_token}`,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tif (response.data && response.data.code === 200) {\n\t\t\t\tif (response.data.data && response.data.data.length > 0) {\n\t\t\t\t\tthis.showRateProfessional = response.data.data[0].evaluate === 0;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.showRateProfessional = false;\n\t\t}\n\t}\n}\n","export default \".title {\\n  font-size: 29px;\\n}\\n.title .small {\\n  font-size: 18px;\\n}\\n.text {\\n  font-size: 22px;\\n}\\n.subtitle {\\n  font-size: 18px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NlcnZpY2lvLXBhZ2FyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVJLGVBQUE7QUFBSjtBQUVJO0VBQ0ksZUFBQTtBQUFSO0FBR0E7RUFFSSxlQUFBO0FBREo7QUFHQTtFQUVJLGVBQUE7QUFESiIsImZpbGUiOiJzZXJ2aWNpby1wYWdhci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudGl0bGVcbntcbiAgICBmb250LXNpemU6IDI5cHg7XG5cbiAgICAuc21hbGwge1xuICAgICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgfVxufVxuLnRleHRcbntcbiAgICBmb250LXNpemU6IDIycHg7XG59XG4uc3VidGl0bGVcbntcbiAgICBmb250LXNpemU6IDE4cHg7XG59Il19 */\";","export default \"<ion-header>\\n  <ion-toolbar mode=\\\"ios\\\" color=\\\"primary\\\">\\n\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/user/solicitud-status\\\" text=\\\"\\\" icon=\\\"arrow-back\\\"></ion-back-button>\\n    </ion-buttons>\\n\\n    <ion-title class=\\\"title-toolbar text-center\\\">MÉTODO DE PAGO</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid fixed>\\n\\n    <!-- OMITIR POR EL MOMENTO BTN -->\\n    <ion-row class=\\\"ion-margin-bottom\\\" *ngIf=\\\"loadedService && loadedService.type_request !== 'URGENT'\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col>\\n        <ion-button size=\\\"5\\\" expand=\\\"block\\\" fill=\\\"outline\\\" (click)=\\\"goToReport()\\\"\\n          *ngIf=\\\"loadedService && loadedService.request_cost.length > 0\\\">\\n          <ion-icon slot=\\\"start\\\" name=\\\"document-text-outline\\\"></ion-icon>\\n          Ver informe de los servicios\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n    <!-- title  -->\\n    <ion-row>\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text color=\\\"primary\\\" class=\\\"title\\\">\\n          <b>Detalle del pago</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- servicios pactados  -->\\n    <ion-row>\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text class=\\\"text\\\">\\n          <b>Servicios pactados</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- costo  -->\\n    <ion-row>\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text color=\\\"primary\\\" class=\\\"title\\\">\\n          <b *ngIf=\\\"getServiceCost() !== 0\\\">${{getServiceCost()}}</b>\\n          <b *ngIf=\\\"getServiceCost() === 0\\\" class=\\\"small\\\">Aún no se ha asignado un costo</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- servicios adicionales  -->\\n    <ion-row *ngIf=\\\"loadedService && loadedService.type_request !== 'URGENT'\\\">\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text class=\\\"text\\\">\\n          <b>Servicios adicionales</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- costo  -->\\n    <ion-row *ngIf=\\\"loadedService && loadedService.request_cost.length > 0 && loadedService.type_request !== 'URGENT'\\\">\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text color=\\\"primary\\\" class=\\\"title\\\">\\n          <b *ngIf=\\\"getServiceAditional() !== 0\\\">${{getServiceAditional()}}</b>\\n          <b *ngIf=\\\"getServiceAditional() === 0\\\" class=\\\"small\\\">Aún no se ha asignado un costo</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- empty aditionals  -->\\n    <ion-row *ngIf=\\\"loadedService && loadedService.request_cost.length === 0 && loadedService.type_request !== 'URGENT'\\\">\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text color=\\\"primary\\\" class=\\\"title\\\">\\n          <b class=\\\"small\\\">No se tienen adicionales</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- servicios adicionales  -->\\n    <ion-row>\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text class=\\\"text ion-text-uppercase\\\">\\n          <b>TOTAL</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- costo  -->\\n    <ion-row>\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text color=\\\"danger\\\" class=\\\"title\\\">\\n          <b *ngIf=\\\"loadedService && loadedService.request_cost.length > 0\\\">${{getTotal()}}</b>\\n          <b *ngIf=\\\"loadedService && loadedService.request_cost.length === 0\\\" class=\\\"small\\\">No se ha asignado un\\n            costo</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- servicios adicionales  -->\\n    <!--\\n    <ion-row *ngIf=\\\"isFinished\\\">\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text class=\\\"text ion-text-uppercase\\\">\\n          <b>REFERENCIA</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n    -->\\n\\n    <!-- costo  -->\\n    <!--\\n    <ion-row *ngIf=\\\"isFinished\\\">\\n      <ion-col size=\\\"11\\\" offset=\\\"1\\\">\\n        <ion-text color=\\\"danger\\\" class=\\\"title\\\">\\n          <b>{{loadedService && loadedService.reference ? loadedService.reference : 'N/D'}}</b>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n    -->\\n\\n    <!-- Costo & pay BTNS-->\\n    <ion-row class=\\\"ion-margin-top\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-text class=\\\"main-color subtitle\\\"><b>{{isFinished ? 'Método de pago aplicado' : isFinished && selectedButton === 'credit' ? 'Métodos disponibles de pago' : ''}}</b>\\n        </ion-text>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n\\n      <ion-col size=\\\"12\\\" class=\\\"ion-text-center\\\">\\n        <section>\\n          <!-- btn -->\\n          <ion-button size=\\\"small\\\" [fill]=\\\"selectedButton === 'credit' ? 'outline' : 'outline'\\\"\\n            *ngIf=\\\"isFinished && selectedButton === 'credit'\\\">\\n            <ion-icon slot=\\\"start\\\" src=\\\"assets/icon/visa.svg\\\"></ion-icon>\\n            Tarjeta\\n          </ion-button>\\n\\n          <!-- btn -->\\n          <!--\\n          <ion-button size=\\\"small\\\" (click)=\\\"setSelectedButton('debit')\\\"  [fill]=\\\"selectedButton === 'debit' ? 'solid' : 'outline'\\\">\\n            <ion-icon slot=\\\"start\\\" src=\\\"assets/icon/mastercard.svg\\\"></ion-icon>\\n            Débito\\n          </ion-button>\\n          -->\\n\\n          <!-- btn -->\\n          <ion-button size=\\\"small\\\" [fill]=\\\"selectedButton === 'cash' ? 'outline' : 'outline'\\\"\\n            *ngIf=\\\"isFinished && selectedButton === 'cash'\\\">\\n            <ion-icon slot=\\\"start\\\" src=\\\"/assets/icon/ic_dollar_blank.svg\\\"></ion-icon>\\n            Efectivo\\n          </ion-button>\\n\\n          <!-- btn -->\\n          <!--\\n          <ion-button size=\\\"small\\\" (click)=\\\"setSelectedButton('transfer')\\\"\\n            [fill]=\\\"selectedButton === 'transfer' ? 'solid' : 'outline'\\\">\\n            <ion-icon slot=\\\"start\\\" src=\\\"/assets/icon/ic_money_blank.svg\\\"></ion-icon>\\n            Transferencia\\n          </ion-button>\\n          -->\\n\\n        </section>\\n      </ion-col>\\n\\n    </ion-row>\\n\\n    <!-- CONFIRMAR BTN -->\\n    <ion-row class=\\\"ion-margin-top\\\" *ngIf=\\\"!isFinished && selectedButton === 'credit'\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col>\\n        <!-- [disabled]=\\\"!servicesCosts\\\" -->\\n        <ion-button size=\\\"5\\\" expand=\\\"block\\\" class=\\\"ion-text-uppercase\\\" (click)=\\\"paymentForm()\\\">\\n          PAGAR\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n    <ion-row *ngIf=\\\"isFinished\\\" style=\\\"margin-top: 20px;\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"10\\\" class=\\\"ion-text-center\\\">\\n        <ion-button size=\\\"10\\\" [disabled]=\\\"!showRateProfessional\\\" expand=\\\"block\\\" fill=\\\"solid\\\"\\n          class=\\\"ion-text-uppercase btn-rate\\\" (click)=\\\"goToRateProfessional()\\\">\\n          <ion-icon src=\\\"/assets/icon/ic_like.svg\\\" color=\\\"#ffffff\\\" class=\\\"main-color margin-right\\\"></ion-icon>\\n          &nbsp;&nbsp;{{showRateProfessional ? 'CALIFICAR EL SERVICIO' : 'YA HAS CALIFICADO AL PROFESIONAL'}}\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n\\n  </ion-grid>\\n</ion-content>\";"]}